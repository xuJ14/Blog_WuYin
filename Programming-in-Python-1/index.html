<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/gallery/avator.svg">
  <link rel="icon" type="image/png" sizes="16x16" href="/gallery/avator.svg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="Lr_u9ltNAl44yHB3jiDZo_D4g7u1IrCztvoySOZJeis">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/black/pace-theme-center-simple.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"xuj14.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.12.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="STATS 507 Data Science in Python">
<meta property="og:type" content="article">
<meta property="og:title" content="Programming in Python (1)">
<meta property="og:url" content="https://xuj14.github.io/Programming-in-Python-1/index.html">
<meta property="og:site_name" content="午尹">
<meta property="og:description" content="STATS 507 Data Science in Python">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-04-20T04:32:58.000Z">
<meta property="article:modified_time" content="2022-08-07T04:45:29.152Z">
<meta property="article:author" content="Jun XU">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://xuj14.github.io/Programming-in-Python-1/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://xuj14.github.io/Programming-in-Python-1/","path":"Programming-in-Python-1/","title":"Programming in Python (1)"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Programming in Python (1) | 午尹</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SJCKHPPPPQ"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-SJCKHPPPPQ","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end -->
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">午尹</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Quant</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">7</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">5</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">25</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#string"><span class="nav-number">1.</span> <span class="nav-text">String</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#list"><span class="nav-number">2.</span> <span class="nav-text">List</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#anonymous-function"><span class="nav-number">3.</span> <span class="nav-text">Anonymous Function:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dicts-and-tuples"><span class="nav-number">4.</span> <span class="nav-text">Dicts and tuples</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#operation-time-of-the-loops"><span class="nav-number">5.</span> <span class="nav-text">Operation time of the loops</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dict"><span class="nav-number">6.</span> <span class="nav-text">Dict</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#brief-of-if-and-else"><span class="nav-number">7.</span> <span class="nav-text">Brief of if and else</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#application-of-dict-listtuple"><span class="nav-number">8.</span> <span class="nav-text">Application of dict,
list,tuple</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#list-1"><span class="nav-number">8.1.</span> <span class="nav-text">List</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#exercise-is_prime"><span class="nav-number">8.1.1.</span> <span class="nav-text">Exercise: is_prime</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#all-function"><span class="nav-number">9.</span> <span class="nav-text">all() function</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#exercise-mean"><span class="nav-number">9.1.</span> <span class="nav-text">Exercise mean()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sorted-list-sort-and-sorted"><span class="nav-number">10.</span> <span class="nav-text">Sorted List sort() and
sorted()</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#if-you-want-to-get-integer"><span class="nav-number">11.</span> <span class="nav-text">If you want to get integer</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#all-function-1"><span class="nav-number">12.</span> <span class="nav-text">all() function</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dict-1"><span class="nav-number">13.</span> <span class="nav-text">Dict</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#exercise-mode"><span class="nav-number">13.1.</span> <span class="nav-text">Exercise mode()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#max"><span class="nav-number">13.2.</span> <span class="nav-text">max()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#count-list"><span class="nav-number">13.3.</span> <span class="nav-text">count() list</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#setdefault"><span class="nav-number">13.4.</span> <span class="nav-text">setdefault()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#collections-%E7%B1%BB"><span class="nav-number">14.</span> <span class="nav-text">Collections 类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tuple"><span class="nav-number">15.</span> <span class="nav-text">Tuple</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#exerciseharry-potter"><span class="nav-number">15.1.</span> <span class="nav-text">Exercise：Harry Potter</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#iterators"><span class="nav-number">16.</span> <span class="nav-text">Iterators</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#itertools"><span class="nav-number">16.1.</span> <span class="nav-text">Itertools</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#it.product-%E5%B0%86%E4%B8%A4%E4%B8%AAlist%E4%B8%80%E4%B8%80%E5%AF%B9%E5%BA%94%E5%BD%A2%E6%88%90%E4%B8%80%E7%B3%BB%E5%88%97tuple"><span class="nav-number">16.1.1.</span> <span class="nav-text">it.product
将两个list一一对应形成一系列tuple</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BAlist"><span class="nav-number">16.1.2.</span> <span class="nav-text">随机list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iterable-can-be-infinite"><span class="nav-number">16.1.3.</span> <span class="nav-text">iterable can be infinite</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#itertools.islice"><span class="nav-number">16.1.4.</span> <span class="nav-text">itertools.islice</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#generators"><span class="nav-number">17.</span> <span class="nav-text">Generators</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#yield"><span class="nav-number">17.0.1.</span> <span class="nav-text">yield</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#generate-the-perfect-numbers"><span class="nav-number">17.0.1.1.</span> <span class="nav-text">Generate the perfect numbers</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#exceptions"><span class="nav-number">18.</span> <span class="nav-text">Exceptions</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#files"><span class="nav-number">19.</span> <span class="nav-text">Files</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#formatting-strings"><span class="nav-number">20.</span> <span class="nav-text">Formatting strings</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#generator"><span class="nav-number">21.</span> <span class="nav-text">Generator</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#lambda-expressions"><span class="nav-number">22.</span> <span class="nav-text">lambda expressions</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#any-and-all"><span class="nav-number">23.</span> <span class="nav-text">any() and all()</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#reading-csv-and-txt"><span class="nav-number">24.</span> <span class="nav-text">Reading csv and txt</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#reading-csv-with-a-header"><span class="nav-number">24.1.</span> <span class="nav-text">Reading csv with a header</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#using-pandas-to-read-and-write-csv"><span class="nav-number">24.2.</span> <span class="nav-text">using pandas to read and
write csv</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reading-bytes-from-a-file"><span class="nav-number">24.3.</span> <span class="nav-text">Reading bytes from a file</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#object"><span class="nav-number">25.</span> <span class="nav-text">Object</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#tictoctoe"><span class="nav-number">25.0.1.</span> <span class="nav-text">TicTocToe</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#example-class"><span class="nav-number">25.0.2.</span> <span class="nav-text">Example: class</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#classmethod"><span class="nav-number">25.1.</span> <span class="nav-text">@classmethod</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dataframe-class"><span class="nav-number">25.2.</span> <span class="nav-text">Dataframe class</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#inheritance"><span class="nav-number">25.3.</span> <span class="nav-text">Inheritance</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#super-constructor"><span class="nav-number">25.4.</span> <span class="nav-text">Super constructor</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#overide"><span class="nav-number">25.5.</span> <span class="nav-text">Overide</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#iterating-over-observations"><span class="nav-number">26.</span> <span class="nav-text">Iterating over observations</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#map-filter-and-reduce"><span class="nav-number">27.</span> <span class="nav-text">map, filter, and reduce</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#map"><span class="nav-number">27.1.</span> <span class="nav-text">map</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reduce"><span class="nav-number">27.2.</span> <span class="nav-text">Reduce</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#enron-e-mail-data"><span class="nav-number">27.2.1.</span> <span class="nav-text">Enron e-mail data</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#who-sends-the-most-e-mail"><span class="nav-number">27.2.1.1.</span> <span class="nav-text">Who sends the most e-mail</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#set"><span class="nav-number">27.3.</span> <span class="nav-text">set()</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#who-e-mailed-the-most-unique-people"><span class="nav-number">27.3.0.1.</span> <span class="nav-text">Who e-mailed the most
unique people</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mapreduce-%E9%80%9A%E7%94%A8%E6%A8%A1%E6%9D%BF"><span class="nav-number">27.4.</span> <span class="nav-text">Mapreduce 通用模板</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#tricks"><span class="nav-number">27.4.1.</span> <span class="nav-text">Tricks</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jun XU"
      src="/gallery/avator.jpg">
  <p class="site-author-name" itemprop="name">Jun XU</p>
  <div class="site-description" itemprop="description">Financial Engineering | Machine Learning</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">25</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/xuJ14" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xuJ14" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jun.xu14@gmail.com" title="E-Mail → mailto:jun.xu14@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/xuJ14" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://xuj14.github.io/Programming-in-Python-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/gallery/avator.jpg">
      <meta itemprop="name" content="Jun XU">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="午尹">
      <meta itemprop="description" content="Financial Engineering | Machine Learning">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Programming in Python (1) | 午尹">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Programming in Python (1)
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-20 00:32:58" itemprop="dateCreated datePublished" datetime="2022-04-20T00:32:58-04:00">2022-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-08-07 00:45:29" itemprop="dateModified" datetime="2022-08-07T00:45:29-04:00">2022-08-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
    <span id="/Programming-in-Python-1/" class="post-meta-item leancloud_visitors" data-flag-title="Programming in Python (1)" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>45k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>41 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="string">String</h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">seq = <span class="string">"this is a new world"</span></span><br><span class="line">seq[<span class="number">2</span>::-<span class="number">2</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'it'</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seq[-<span class="number">1</span>::-<span class="number">2</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'drwwnas it'</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 倒序</span></span><br><span class="line">seq[::-<span class="number">1</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'dlrow wen a si siht'</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &gt;&gt;&gt; seq.split(" ")</span></span><br><span class="line"><span class="comment"># AttributeError: 'list' object has no attribute 'split'</span></span><br><span class="line"></span><br><span class="line"><span class="string">"this is a new world"</span>.split(<span class="string">" "</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['this', 'is', 'a', 'new', 'world']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Delete 头尾的\n...</span></span><br><span class="line"><span class="string">'this\n'</span>.strip()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'this'</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">word = <span class="string">""</span></span><br><span class="line"><span class="keyword">if</span> word:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'True'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'False'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>False</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">my_list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="number">1</span> <span class="keyword">in</span> my_list</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>] <span class="keyword">in</span> my_list</span><br><span class="line">[<span class="number">1</span>] <span class="keyword">in</span> my_list</span><br></pre></td></tr></tbody></table></figure>
<pre><code>False</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">my_letters = <span class="string">"abc"</span></span><br><span class="line"><span class="built_in">list</span>(my_letters)==my_list</span><br><span class="line"><span class="comment">## List is not String</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>False</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>(my_letters)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>str</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>(<span class="built_in">list</span>(my_letters))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>list</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""</span>.join(<span class="built_in">list</span>(my_letters))</span><br><span class="line"><span class="comment"># 不同于 str("".join(list(my_letters)))</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>'abc'</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"-"</span>.join(<span class="built_in">list</span>(my_letters))</span><br><span class="line"><span class="comment">## The list can not be numbers like [1,2,3]</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>'a-b-c'</code></pre>
<p>How to change some letters in the String?</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Error: my_letters[0]=z</span></span><br><span class="line"><span class="comment"># Correct: </span></span><br><span class="line">my_list = <span class="built_in">list</span>(my_letters)</span><br><span class="line">my_list[<span class="number">0</span>]=<span class="string">"z"</span></span><br><span class="line">my_list</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['z', 'b', 'c']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fruits = [<span class="string">"apple"</span>,<span class="string">"banana"</span>,<span class="string">"orange"</span>]</span><br><span class="line"><span class="built_in">list</span>(<span class="built_in">enumerate</span>(fruits))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[(0, 'apple'), (1, 'banana'), (2, 'orange')]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">enumerate</span>(fruits, start=<span class="number">1</span>)) </span><br></pre></td></tr></tbody></table></figure>
<pre><code>[(1, 'apple'), (2, 'banana'), (3, 'orange')]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i,f <span class="keyword">in</span> <span class="built_in">enumerate</span>(fruits):</span><br><span class="line">  fruits[i]=f.upper()</span><br><span class="line">fruits</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['APPLE', 'BANANA', 'ORANGE']</code></pre>
<h1 id="list">List</h1>
<ul>
<li>list are not iterators, use <code>iter()</code> -<code>next()</code>
= <code>iter.__next__()</code></li>
<li>for loop 就是这种工作方式</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numbers = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">11</span>))</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">range</span>(<span class="number">1</span>,<span class="number">11</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>range(1, 11)</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numbers</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">square</span>(<span class="params">x</span>):</span><br><span class="line">  <span class="keyword">return</span> x**<span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x**<span class="number">2</span> <span class="keyword">if</span>(x%<span class="number">2</span>==<span class="number">0</span>) <span class="keyword">else</span> <span class="literal">None</span>, numbers))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[None, 4, None, 16, None, 36, None, 64, None, 100]</code></pre>
<p><code>map</code> function</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>(square,numbers)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;map at 0x1ce204a6950&gt;</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">map</span>(square,numbers))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</code></pre>
<h1 id="anonymous-function">Anonymous Function:</h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x**<span class="number">2</span>, numbers))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> numbers]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x <span class="keyword">for</span> x <span class="keyword">in</span> numbers <span class="keyword">if</span> x%<span class="number">2</span>==<span class="number">0</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[2, 4, 6, 8, 10]</code></pre>
<h1 id="dicts-and-tuples">Dicts and tuples</h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_large_list = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">10_000_000</span>))</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_large_dict = {v: v <span class="keyword">for</span> v <span class="keyword">in</span> my_large_list}</span><br><span class="line">my_large_dict</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{0: 0,
 1: 1,
 2: 2,
 3: 3,
 4: 4,
 5: 5,
 6: 6,
 7: 7,
 8: 8,
 9: 9,
 10: 10,
 11: 11,
 12: 12,
 13: 13,
 14: 14,
 15: 15,
 16: 16,
 17: 17,
 18: 18,
 19: 19,
 20: 20,
 21: 21,
 22: 22,
 23: 23,
 24: 24,
 25: 25,
 26: 26,
 27: 27,
 28: 28,
 29: 29,
 30: 30,
 31: 31,
 32: 32,
 33: 33,
 34: 34,
 35: 35,
 36: 36,
 37: 37,
 38: 38,
 39: 39,
 40: 40,
 41: 41,
 42: 42,
 43: 43,
 44: 44,
 45: 45,
 46: 46,
 47: 47,
 48: 48,
 49: 49,
 50: 50,
 51: 51,
 52: 52,
 53: 53,
 54: 54,
 55: 55,
 56: 56,
 57: 57,
 58: 58,
 59: 59,
 60: 60,
 61: 61,
 62: 62,
 63: 63,
 64: 64,
 65: 65,
 66: 66,
 67: 67,
 68: 68,
 69: 69,
 70: 70,
 71: 71,
 72: 72,
 73: 73,
 74: 74,
 75: 75,
 76: 76,
 77: 77,
 78: 78,
 79: 79,
 80: 80,
 81: 81,
 82: 82,
 83: 83,
 84: 84,
 85: 85,
 86: 86,
 87: 87,
 88: 88,
 89: 89,
 90: 90,
 91: 91,
 92: 92,
 93: 93,
 94: 94,
 95: 95,
 96: 96,
 97: 97,
 98: 98,
 99: 99,
 100: 100,
 101: 101,
 102: 102,
 103: 103,
 104: 104,
 105: 105,
 106: 106,
 107: 107,
 108: 108,
 109: 109,
 110: 110,
 111: 111,
 112: 112,
 113: 113,
 114: 114,
 115: 115,
 116: 116,
 117: 117,
 118: 118,
 119: 119,
 120: 120,
 121: 121,
 122: 122,
 123: 123,
 124: 124,
 125: 125,
 126: 126,
 127: 127,
 128: 128,
 129: 129,
 130: 130,
 131: 131,
 132: 132,
 133: 133,
 134: 134,
 135: 135,
 136: 136,
 137: 137,
 138: 138,
 139: 139,
 140: 140,
 141: 141,
 142: 142,
 143: 143,
 144: 144,
 145: 145,
 146: 146,
 147: 147,
 148: 148,
 149: 149,
 150: 150,
 151: 151,
 152: 152,
 153: 153,
 154: 154,
 155: 155,
 156: 156,
 157: 157,
 158: 158,
 159: 159,
 160: 160,
 161: 161,
 162: 162,
 163: 163,
 164: 164,
 165: 165,
 166: 166,
 167: 167,
 168: 168,
 169: 169,
 170: 170,
 171: 171,
 172: 172,
 173: 173,
 174: 174,
 175: 175,
 176: 176,
 177: 177,
 178: 178,
 179: 179,
 180: 180,
 181: 181,
 182: 182,
 183: 183,
 184: 184,
 185: 185,
 186: 186,
 187: 187,
 188: 188,
 189: 189,
 190: 190,
 191: 191,
 192: 192,
 193: 193,
 194: 194,
 195: 195,
 196: 196,
 197: 197,
 198: 198,
 199: 199,
 200: 200,
 201: 201,
 202: 202,
 203: 203,
 204: 204,
 205: 205,
 206: 206,
 207: 207,
 208: 208,
 209: 209,
 210: 210,
 211: 211,
 212: 212,
 213: 213,
 214: 214,
 215: 215,
 216: 216,
 217: 217,
 218: 218,
 219: 219,
 220: 220,
 221: 221,
 222: 222,
 223: 223,
 224: 224,
 225: 225,
 226: 226,
 227: 227,
 228: 228,
 229: 229,
 230: 230,
 231: 231,
 232: 232,
 233: 233,
 234: 234,
 235: 235,
 236: 236,
 237: 237,
 238: 238,
 239: 239,
 240: 240,
 241: 241,
 242: 242,
 243: 243,
 244: 244,
 245: 245,
 246: 246,
 247: 247,
 248: 248,
 249: 249,
 250: 250,
 251: 251,
 252: 252,
 253: 253,
 254: 254,
 255: 255,
 256: 256,
 257: 257,
 258: 258,
 259: 259,
 260: 260,
 261: 261,
 262: 262,
 263: 263,
 264: 264,
 265: 265,
 266: 266,
 267: 267,
 268: 268,
 269: 269,
 270: 270,
 271: 271,
 272: 272,
 273: 273,
 274: 274,
 275: 275,
 276: 276,
 277: 277,
 278: 278,
 279: 279,
 280: 280,
 281: 281,
 282: 282,
 283: 283,
 284: 284,
 285: 285,
 286: 286,
 287: 287,
 288: 288,
 289: 289,
 290: 290,
 291: 291,
 292: 292,
 293: 293,
 294: 294,
 295: 295,
 296: 296,
 297: 297,
 298: 298,
 299: 299,
 300: 300,
 301: 301,
 302: 302,
 303: 303,
 304: 304,
 305: 305,
 306: 306,
 307: 307,
 308: 308,
 309: 309,
 310: 310,
 311: 311,
 312: 312,
 313: 313,
 314: 314,
 315: 315,
 316: 316,
 317: 317,
 318: 318,
 319: 319,
 320: 320,
 321: 321,
 322: 322,
 323: 323,
 324: 324,
 325: 325,
 326: 326,
 327: 327,
 328: 328,
 329: 329,
 330: 330,
 331: 331,
 332: 332,
 333: 333,
 334: 334,
 335: 335,
 336: 336,
 337: 337,
 338: 338,
 339: 339,
 340: 340,
 341: 341,
 342: 342,
 343: 343,
 344: 344,
 345: 345,
 346: 346,
 347: 347,
 348: 348,
 349: 349,
 350: 350,
 351: 351,
 352: 352,
 353: 353,
 354: 354,
 355: 355,
 356: 356,
 357: 357,
 358: 358,
 359: 359,
 360: 360,
 361: 361,
 362: 362,
 363: 363,
 364: 364,
 365: 365,
 366: 366,
 367: 367,
 368: 368,
 369: 369,
 370: 370,
 371: 371,
 372: 372,
 373: 373,
 374: 374,
 375: 375,
 376: 376,
 377: 377,
 378: 378,
 379: 379,
 380: 380,
 381: 381,
 382: 382,
 383: 383,
 384: 384,
 385: 385,
 386: 386,
 387: 387,
 388: 388,
 389: 389,
 390: 390,
 391: 391,
 392: 392,
 393: 393,
 394: 394,
 395: 395,
 396: 396,
 397: 397,
 398: 398,
 399: 399,
 400: 400,
 401: 401,
 402: 402,
 403: 403,
 404: 404,
 405: 405,
 406: 406,
 407: 407,
 408: 408,
 409: 409,
 410: 410,
 411: 411,
 412: 412,
 413: 413,
 414: 414,
 415: 415,
 416: 416,
 417: 417,
 418: 418,
 419: 419,
 420: 420,
 421: 421,
 422: 422,
 423: 423,
 424: 424,
 425: 425,
 426: 426,
 427: 427,
 428: 428,
 429: 429,
 430: 430,
 431: 431,
 432: 432,
 433: 433,
 434: 434,
 435: 435,
 436: 436,
 437: 437,
 438: 438,
 439: 439,
 440: 440,
 441: 441,
 442: 442,
 443: 443,
 444: 444,
 445: 445,
 446: 446,
 447: 447,
 448: 448,
 449: 449,
 450: 450,
 451: 451,
 452: 452,
 453: 453,
 454: 454,
 455: 455,
 456: 456,
 457: 457,
 458: 458,
 459: 459,
 460: 460,
 461: 461,
 462: 462,
 463: 463,
 464: 464,
 465: 465,
 466: 466,
 467: 467,
 468: 468,
 469: 469,
 470: 470,
 471: 471,
 472: 472,
 473: 473,
 474: 474,
 475: 475,
 476: 476,
 477: 477,
 478: 478,
 479: 479,
 480: 480,
 481: 481,
 482: 482,
 483: 483,
 484: 484,
 485: 485,
 486: 486,
 487: 487,
 488: 488,
 489: 489,
 490: 490,
 491: 491,
 492: 492,
 493: 493,
 494: 494,
 495: 495,
 496: 496,
 497: 497,
 498: 498,
 499: 499,
 500: 500,
 501: 501,
 502: 502,
 503: 503,
 504: 504,
 505: 505,
 506: 506,
 507: 507,
 508: 508,
 509: 509,
 510: 510,
 511: 511,
 512: 512,
 513: 513,
 514: 514,
 515: 515,
 516: 516,
 517: 517,
 518: 518,
 519: 519,
 520: 520,
 521: 521,
 522: 522,
 523: 523,
 524: 524,
 525: 525,
 526: 526,
 527: 527,
 528: 528,
 529: 529,
 530: 530,
 531: 531,
 532: 532,
 533: 533,
 534: 534,
 535: 535,
 536: 536,
 537: 537,
 538: 538,
 539: 539,
 540: 540,
 541: 541,
 542: 542,
 543: 543,
 544: 544,
 545: 545,
 546: 546,
 547: 547,
 548: 548,
 549: 549,
 550: 550,
 551: 551,
 552: 552,
 553: 553,
 554: 554,
 555: 555,
 556: 556,
 557: 557,
 558: 558,
 559: 559,
 560: 560,
 561: 561,
 562: 562,
 563: 563,
 564: 564,
 565: 565,
 566: 566,
 567: 567,
 568: 568,
 569: 569,
 570: 570,
 571: 571,
 572: 572,
 573: 573,
 574: 574,
 575: 575,
 576: 576,
 577: 577,
 578: 578,
 579: 579,
 580: 580,
 581: 581,
 582: 582,
 583: 583,
 584: 584,
 585: 585,
 586: 586,
 587: 587,
 588: 588,
 589: 589,
 590: 590,
 591: 591,
 592: 592,
 593: 593,
 594: 594,
 595: 595,
 596: 596,
 597: 597,
 598: 598,
 599: 599,
 600: 600,
 601: 601,
 602: 602,
 603: 603,
 604: 604,
 605: 605,
 606: 606,
 607: 607,
 608: 608,
 609: 609,
 610: 610,
 611: 611,
 612: 612,
 613: 613,
 614: 614,
 615: 615,
 616: 616,
 617: 617,
 618: 618,
 619: 619,
 620: 620,
 621: 621,
 622: 622,
 623: 623,
 624: 624,
 625: 625,
 626: 626,
 627: 627,
 628: 628,
 629: 629,
 630: 630,
 631: 631,
 632: 632,
 633: 633,
 634: 634,
 635: 635,
 636: 636,
 637: 637,
 638: 638,
 639: 639,
 640: 640,
 641: 641,
 642: 642,
 643: 643,
 644: 644,
 645: 645,
 646: 646,
 647: 647,
 648: 648,
 649: 649,
 650: 650,
 651: 651,
 652: 652,
 653: 653,
 654: 654,
 655: 655,
 656: 656,
 657: 657,
 658: 658,
 659: 659,
 660: 660,
 661: 661,
 662: 662,
 663: 663,
 664: 664,
 665: 665,
 666: 666,
 667: 667,
 668: 668,
 669: 669,
 670: 670,
 671: 671,
 672: 672,
 673: 673,
 674: 674,
 675: 675,
 676: 676,
 677: 677,
 678: 678,
 679: 679,
 680: 680,
 681: 681,
 682: 682,
 683: 683,
 684: 684,
 685: 685,
 686: 686,
 687: 687,
 688: 688,
 689: 689,
 690: 690,
 691: 691,
 692: 692,
 693: 693,
 694: 694,
 695: 695,
 696: 696,
 697: 697,
 698: 698,
 699: 699,
 700: 700,
 701: 701,
 702: 702,
 703: 703,
 704: 704,
 705: 705,
 706: 706,
 707: 707,
 708: 708,
 709: 709,
 710: 710,
 711: 711,
 712: 712,
 713: 713,
 714: 714,
 715: 715,
 716: 716,
 717: 717,
 718: 718,
 719: 719,
 720: 720,
 721: 721,
 722: 722,
 723: 723,
 724: 724,
 725: 725,
 726: 726,
 727: 727,
 728: 728,
 729: 729,
 730: 730,
 731: 731,
 732: 732,
 733: 733,
 734: 734,
 735: 735,
 736: 736,
 737: 737,
 738: 738,
 739: 739,
 740: 740,
 741: 741,
 742: 742,
 743: 743,
 744: 744,
 745: 745,
 746: 746,
 747: 747,
 748: 748,
 749: 749,
 750: 750,
 751: 751,
 752: 752,
 753: 753,
 754: 754,
 755: 755,
 756: 756,
 757: 757,
 758: 758,
 759: 759,
 760: 760,
 761: 761,
 762: 762,
 763: 763,
 764: 764,
 765: 765,
 766: 766,
 767: 767,
 768: 768,
 769: 769,
 770: 770,
 771: 771,
 772: 772,
 773: 773,
 774: 774,
 775: 775,
 776: 776,
 777: 777,
 778: 778,
 779: 779,
 780: 780,
 781: 781,
 782: 782,
 783: 783,
 784: 784,
 785: 785,
 786: 786,
 787: 787,
 788: 788,
 789: 789,
 790: 790,
 791: 791,
 792: 792,
 793: 793,
 794: 794,
 795: 795,
 796: 796,
 797: 797,
 798: 798,
 799: 799,
 800: 800,
 801: 801,
 802: 802,
 803: 803,
 804: 804,
 805: 805,
 806: 806,
 807: 807,
 808: 808,
 809: 809,
 810: 810,
 811: 811,
 812: 812,
 813: 813,
 814: 814,
 815: 815,
 816: 816,
 817: 817,
 818: 818,
 819: 819,
 820: 820,
 821: 821,
 822: 822,
 823: 823,
 824: 824,
 825: 825,
 826: 826,
 827: 827,
 828: 828,
 829: 829,
 830: 830,
 831: 831,
 832: 832,
 833: 833,
 834: 834,
 835: 835,
 836: 836,
 837: 837,
 838: 838,
 839: 839,
 840: 840,
 841: 841,
 842: 842,
 843: 843,
 844: 844,
 845: 845,
 846: 846,
 847: 847,
 848: 848,
 849: 849,
 850: 850,
 851: 851,
 852: 852,
 853: 853,
 854: 854,
 855: 855,
 856: 856,
 857: 857,
 858: 858,
 859: 859,
 860: 860,
 861: 861,
 862: 862,
 863: 863,
 864: 864,
 865: 865,
 866: 866,
 867: 867,
 868: 868,
 869: 869,
 870: 870,
 871: 871,
 872: 872,
 873: 873,
 874: 874,
 875: 875,
 876: 876,
 877: 877,
 878: 878,
 879: 879,
 880: 880,
 881: 881,
 882: 882,
 883: 883,
 884: 884,
 885: 885,
 886: 886,
 887: 887,
 888: 888,
 889: 889,
 890: 890,
 891: 891,
 892: 892,
 893: 893,
 894: 894,
 895: 895,
 896: 896,
 897: 897,
 898: 898,
 899: 899,
 900: 900,
 901: 901,
 902: 902,
 903: 903,
 904: 904,
 905: 905,
 906: 906,
 907: 907,
 908: 908,
 909: 909,
 910: 910,
 911: 911,
 912: 912,
 913: 913,
 914: 914,
 915: 915,
 916: 916,
 917: 917,
 918: 918,
 919: 919,
 920: 920,
 921: 921,
 922: 922,
 923: 923,
 924: 924,
 925: 925,
 926: 926,
 927: 927,
 928: 928,
 929: 929,
 930: 930,
 931: 931,
 932: 932,
 933: 933,
 934: 934,
 935: 935,
 936: 936,
 937: 937,
 938: 938,
 939: 939,
 940: 940,
 941: 941,
 942: 942,
 943: 943,
 944: 944,
 945: 945,
 946: 946,
 947: 947,
 948: 948,
 949: 949,
 950: 950,
 951: 951,
 952: 952,
 953: 953,
 954: 954,
 955: 955,
 956: 956,
 957: 957,
 958: 958,
 959: 959,
 960: 960,
 961: 961,
 962: 962,
 963: 963,
 964: 964,
 965: 965,
 966: 966,
 967: 967,
 968: 968,
 969: 969,
 970: 970,
 971: 971,
 972: 972,
 973: 973,
 974: 974,
 975: 975,
 976: 976,
 977: 977,
 978: 978,
 979: 979,
 980: 980,
 981: 981,
 982: 982,
 983: 983,
 984: 984,
 985: 985,
 986: 986,
 987: 987,
 988: 988,
 989: 989,
 990: 990,
 991: 991,
 992: 992,
 993: 993,
 994: 994,
 995: 995,
 996: 996,
 997: 997,
 998: 998,
 999: 999,
 ...}</code></pre>
<p><code>hash()</code> function</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Get hash of the object</span></span><br><span class="line"><span class="built_in">hash</span>(<span class="number">10_000_000</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>10000000</code></pre>
<h1 id="operation-time-of-the-loops">Operation time of the loops</h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">%%timeit</span><br><span class="line"><span class="number">10_000_000</span> <span class="keyword">in</span> my_large_dict</span><br></pre></td></tr></tbody></table></figure>
<pre><code>327 ns ± 141 ns per loop (mean ± std. dev. of 7 runs, 1,000,000 loops each)</code></pre>
<h1 id="dict">Dict</h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d = {<span class="number">1</span>:<span class="string">'jonathan'</span>,<span class="number">2</span>:<span class="string">'julian'</span>}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(d)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1, 2]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> d.items():</span><br><span class="line">  <span class="built_in">print</span>(d[key])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>jonathan
julian</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(d.items())</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[(1, 'jonathan'), (2, 'julian')]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">len</span>(d)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d[<span class="number">1</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'jonathan'</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">a,b,c = my_list</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a,b = (b,a)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1</code></pre>
<p>There's no difference between these two expressions.</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a,b = b,a</span><br><span class="line">a</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>1</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">seq = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">add = <span class="keyword">lambda</span> x, y: x+y</span><br><span class="line">seq_avg = reduce(add,seq)/<span class="built_in">len</span>(seq)</span><br><span class="line">seq_avg</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2.5</code></pre>
<p>Operation time of dict is very slow than list But faster for
lookup</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">phon = {x: x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100_000_000</span>)}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">min_coins</span>(<span class="params">c, S</span>):</span><br><span class="line">  <span class="keyword">if</span> c&lt;<span class="number">0</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">float</span></span><br></pre></td></tr></tbody></table></figure>
<h1 id="brief-of-if-and-else">Brief of if and else</h1>
<p>result_true if cond(A) else result_false</p>
<h1 id="application-of-dict-listtuple">Application of <code>dict</code>,
<code>list</code>,<code>tuple</code></h1>
<h2 id="list-1">List</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_list = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_list[<span class="number">0</span>], my_list[-<span class="number">1</span>], my_list[:<span class="number">2</span>], my_list[-<span class="number">2</span>:]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(0, 2, [0, 1], [1, 2])</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_list.append(<span class="number">3</span>)</span><br><span class="line">my_list</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 1, 2, 3]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_list+my_list</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 1, 2, 3, 0, 1, 2, 3]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_list*<span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span> <span class="keyword">in</span> my_list <span class="comment"># expensive:searching over whole list</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>False</code></pre>
<p>my_list = [func(x) for x in interable if cond(x)]</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> x % <span class="number">3</span> ==<span class="number">0</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 3, 6, 9]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">range</span>(<span class="number">0</span>,<span class="number">10_000_000_000</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>range(0, 10000000000)</code></pre>
<p>If you use <code>list(range(10_000_000_000))</code>, it will crush
your computer. For list has much longer operation time. And it will
iterate the expression. Thus, <code>list()</code> must have iterable
arguments. Check hlep() of list.</p>
<h3 id="exercise-is_prime">Exercise: is_prime</h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_prime</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,n):</span><br><span class="line">        <span class="keyword">if</span> n % k == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">is_prime(<span class="number">4</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>False</code></pre>
<h1 id="all-function"><code>all()</code> function</h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_prime</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">all</span>(n%k !=<span class="number">0</span> <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,n))</span><br><span class="line">is_prime(<span class="number">5</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>True</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">len</span>([n <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,<span class="number">101</span>) <span class="keyword">if</span> is_prime(n)])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>25</code></pre>
<h2 id="exercise-mean">Exercise mean()</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">mean</span>(<span class="params">x: <span class="built_in">list</span>[<span class="built_in">float</span>]</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">    <span class="string">'return the mean of the list of numbers x'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(x)/<span class="built_in">len</span>(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Error: mean("this is not a float")</span></span><br><span class="line">mean([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2.5</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">median</span>(<span class="params">x: <span class="built_in">list</span>[<span class="built_in">float</span>]</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">    <span class="string">'return a median'</span></span><br><span class="line">    x_sorted = <span class="built_in">sorted</span>(x)</span><br><span class="line">    n = <span class="built_in">len</span>(x)</span><br><span class="line">    <span class="keyword">if</span> n%<span class="number">2</span> ==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> x_sorted[(n-<span class="number">1</span>)//<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> (x_sorted[n//<span class="number">2</span>-<span class="number">1</span>] + x_sorted[n//<span class="number">2</span>])/<span class="number">2</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">x = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">median(x)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>2.5</code></pre>
<h1 id="sorted-list-sort-and-sorted">Sorted List <code>sort()</code> and
<code>sorted()</code></h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">0</span>]</span><br><span class="line">x.sort()</span><br><span class="line">x</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 1, 2, 3, 4]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x_sorted = x.sort()</span><br><span class="line">x_sorted</span><br><span class="line"><span class="built_in">type</span>(x_sorted)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>NoneType</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x_sorted = <span class="built_in">sorted</span>(x)</span><br><span class="line">x_sorted</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 1, 2, 3, 4]</code></pre>
<h1 id="if-you-want-to-get-integer">If you want to get integer</h1>
<p>The index of the list must be integer, sometimes it might be wrong
using <code>x/2</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span>//<span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>2</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span>//<span class="number">1.0</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>4.0</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span>//<span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>1</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span>/<span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>2.0</code></pre>
<h1 id="all-function-1"><code>all()</code> function</h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_prime</span>(<span class="params">n</span>):</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">all</span>(k%<span class="number">2</span> !=<span class="number">0</span> <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,n))</span><br></pre></td></tr></tbody></table></figure>
<p>return true if all the expression is true</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">mean</span>(<span class="params">x: <span class="built_in">list</span>[<span class="built_in">float</span>]</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sum</span>(x)/<span class="built_in">len</span>(x)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>If the type is not right, it will return wrong. And make the program
easier to understand</p>
<h1 id="dict-1"><code>Dict</code></h1>
<ul>
<li>Used to store key-value pairs</li>
<li>Fast lookup</li>
<li>"Gereralized lists"</li>
<li>Keys must be <strong>hashable</strong>; values can be anything</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_dict = {<span class="string">"cat"</span>: [<span class="string">"kitten"</span>,<span class="string">"Gaff"</span>], <span class="string">"dog"</span>: <span class="string">"puppy"</span>, <span class="string">"chicken"</span>: <span class="string">"chick"</span>}</span><br><span class="line">my_dict[<span class="string">"cat"</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['kitten', 'Gaff']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_dict[<span class="string">"cat"</span>][<span class="number">0</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'kitten'</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># iterators to keys, values, and key/value pairs</span></span><br><span class="line"><span class="built_in">list</span>(my_dict.keys())</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['cat', 'dog', 'chicken']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># If no "list", the type is different</span></span><br><span class="line">my_dict.keys()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>dict_keys(['cat', 'dog', 'chicken'])</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(my_dict.values())</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[['kitten', 'Gaff'], 'puppy', 'chick']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># return As Tuple</span></span><br><span class="line"><span class="built_in">list</span>(my_dict.items())</span><br><span class="line"><span class="comment"># A method for loops:</span></span><br><span class="line"><span class="comment"># for k,v in d.items():</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>[('cat', ['kitten', 'Gaff']), ('dog', 'puppy'), ('chicken', 'chick')]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># return a default value if missing</span></span><br><span class="line">my_dict.get(<span class="string">"penguin"</span>, <span class="literal">None</span>)  </span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># return a default value if missing</span></span><br><span class="line">my_dict.get(<span class="string">"penguin"</span>, <span class="string">"not found"</span>)  </span><br></pre></td></tr></tbody></table></figure>
<pre><code>'not found'</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_dict.get(<span class="string">"cat"</span>, <span class="string">"not found"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['kitten', 'Gaff']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># add two dicts together; requires Python 3.9+</span></span><br><span class="line">my_dict | {<span class="string">"horse"</span>: <span class="string">"foal"</span>}  </span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'cat': ['kitten', 'Gaff'],
 'dog': 'puppy',
 'chicken': 'chick',
 'horse': 'foal'}</code></pre>
<h2 id="exercise-mode">Exercise mode()</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>].count(<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This operation is expensive: O(n)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mode</span>(<span class="params">x: <span class="built_in">list</span>[<span class="built_in">float</span>]</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">    highest_count = -<span class="number">1</span></span><br><span class="line">    highest_value = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> x:</span><br><span class="line">        <span class="keyword">if</span> x.count(y) &gt; highest_count:</span><br><span class="line">            highest_count = x.count(y)</span><br><span class="line">            highest_value = y</span><br><span class="line">    <span class="keyword">return</span> highest_value</span><br><span class="line"></span><br><span class="line">mode([<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>1</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">mode</span>(<span class="params">x: <span class="built_in">list</span>[<span class="built_in">float</span>]</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">    d = {}</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> x:</span><br><span class="line">        <span class="comment"># if y not in d:</span></span><br><span class="line">        <span class="comment">#     d[y]=0</span></span><br><span class="line">        d.setdefault(y,<span class="number">0</span>) <span class="comment"># if None, set default num = 0</span></span><br><span class="line">        d[y]+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> d</span><br><span class="line"></span><br><span class="line">mode([<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>])   </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>{0: 1, 1: 2, 2: 1}</code></pre>
<h2 id="max"><code>max()</code></h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">max</span>([<span class="number">0</span>,<span class="number">1</span>,<span class="number">23</span>,<span class="number">3</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>23</code></pre>
<h2 id="count-list"><code>count()</code> list</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># count the object</span></span><br><span class="line">my_list.count(<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1</code></pre>
<h2 id="setdefault"><code>setdefault()</code></h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">d={}</span><br><span class="line">y=<span class="number">0</span></span><br><span class="line">d.setdefault(y,<span class="number">0</span>) <span class="comment"># 如果是空集，就赋值一个默认值</span></span><br><span class="line">d[y]=d[y]+<span class="number">1</span></span><br><span class="line">d</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{0: 1}</code></pre>
<h1 id="collections-类"><code>Collections</code> 类</h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">Counter([<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Counter({0: 1, 1: 2, 2: 1})</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Counter([<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>])[<span class="number">0</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># return the first n most common entries</span></span><br><span class="line">Counter([<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]).most_common(<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[(2, 3)]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">mode</span>(<span class="params">x: <span class="built_in">list</span>[<span class="built_in">float</span>]</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">    <span class="keyword">return</span> Counter(x).most_common(<span class="number">1</span>)[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">mode([<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2</code></pre>
<h1 id="tuple">Tuple</h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Compare the first element</span></span><br><span class="line">(<span class="number">0</span>,<span class="number">1</span>) &gt; (<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>False</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Compare the first element</span></span><br><span class="line"><span class="built_in">max</span>((<span class="number">0</span>,<span class="number">3</span>),(<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(1, 2)</code></pre>
<h2 id="exerciseharry-potter">Exercise：Harry Potter</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hp1 = <span class="built_in">list</span>(<span class="built_in">open</span>(<span class="string">"2/hp1.txt"</span>,<span class="string">"rt"</span>))</span><br><span class="line">hp1[:<span class="number">5</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>["Harry Potter and the Sorcerer's Stone\n", '\n', '\n', 'CHAPTER ONE\n', '\n']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">len</span>(hp1)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>10702</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hp1[<span class="number">0</span>].split(<span class="string">" "</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Harry', 'Potter', 'and', 'the', "Sorcerer's", 'Stone\n']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hp1[<span class="number">0</span>].strip().split(<span class="string">" "</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Harry', 'Potter', 'and', 'the', "Sorcerer's", 'Stone']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">all_word = []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> hp1:</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> line.strip().split(<span class="string">" "</span>):</span><br><span class="line">        all_word.append(word)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">all_word = [word </span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> hp1 </span><br><span class="line">            <span class="keyword">for</span> word <span class="keyword">in</span> line.strip().split(<span class="string">" "</span>)</span><br><span class="line">            ]</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all_word[<span class="number">5</span>:<span class="number">10</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Stone', '', '', 'CHAPTER', 'ONE']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 参见String部分</span></span><br><span class="line"><span class="comment"># "" 返回 False</span></span><br><span class="line">all_word = [word </span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> hp1 </span><br><span class="line">            <span class="keyword">for</span> word <span class="keyword">in</span> line.strip().split(<span class="string">" "</span>)</span><br><span class="line">            <span class="keyword">if</span> word</span><br><span class="line">            ]</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all_word[<span class="number">5</span>:<span class="number">10</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Stone', 'CHAPTER', 'ONE', 'THE', 'BOY']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c = Counter(all_word)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c.most_common(<span class="number">5</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[('the', 3306), ('to', 1827), ('and', 1787), ('a', 1577), ('of', 1235)]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stopwords = [line.strip() <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(<span class="string">"2/stopwords.txt"</span>,<span class="string">"rt"</span>)]</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uncommon_words = [word <span class="keyword">for</span> word <span class="keyword">in</span> all_word <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> stopwords]</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Counter(uncommon_words).most_common(<span class="number">5</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[('Harry', 903), ('--', 688), ('said', 659), ('I', 499), ('He', 468)]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">caps = [word <span class="keyword">for</span> word <span class="keyword">in</span> all_word <span class="keyword">if</span> word[<span class="number">0</span>].upper()==word[<span class="number">0</span>] <span class="keyword">and</span> <span class="built_in">len</span>(word)&gt;<span class="number">5</span>]</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Counter(caps).most_common(<span class="number">5</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>[('Hagrid', 196),
 ('Hermione', 175),
 ('Professor', 161),
 ('Harry,', 134),
 ('Harry.', 115)]</code></pre>
<h1 id="iterators">Iterators</h1>
<p>Iterable is python 的精髓</p>
<p>Iterator:</p>
<ul>
<li>Call <code>next()</code></li>
<li>IF no more values Next() raise
<code>stopiteration</code>（是exception的一种）</li>
<li>可以infinite，但是list不可以</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">a = [1,2]</span></span><br><span class="line"><span class="string">next(a)</span></span><br><span class="line"><span class="string">next(a)</span></span><br><span class="line"><span class="string">next(a)</span></span><br><span class="line"><span class="string"><span class="meta">&gt;&gt;&gt; </span>List is not an iterator</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment"># Iterate something</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">a = <span class="built_in">iter</span>(a)</span><br><span class="line"><span class="built_in">next</span>(a)</span><br><span class="line"><span class="built_in">next</span>(a)</span><br><span class="line"><span class="built_in">next</span>(a)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

StopIteration                             Traceback (most recent call last)

c:\Users\Jun\Documents\Courses\Stats 507\CourseNote.ipynb Cell 134' in &lt;module&gt;
     &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000133?line=10'&gt;11&lt;/a&gt; next(a)
     &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000133?line=11'&gt;12&lt;/a&gt; next(a)
---&gt; &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000133?line=12'&gt;13&lt;/a&gt; next(a)


StopIteration: </code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">len(a)</span></span><br><span class="line"><span class="string"><span class="meta">&gt;&gt;&gt; </span>TypeError: object of type 'list_iterator' has no len()</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="built_in">len</span>(a)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

c:\Users\Jun\Documents\Courses\Stats 507\CourseNote.ipynb Cell 135' in &lt;module&gt;
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000134?line=0'&gt;1&lt;/a&gt; """
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000134?line=1'&gt;2&lt;/a&gt; len(a)
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000134?line=2'&gt;3&lt;/a&gt; &gt;&gt;&gt; TypeError: object of type 'list_iterator' has no len()
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000134?line=3'&gt;4&lt;/a&gt; """
----&gt; &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000134?line=4'&gt;5&lt;/a&gt; len(a)


TypeError: object of type 'list_iterator' has no len()</code></pre>
<p>Iterator and Generator can hold large dataset, not off memory.
Conceptually represent large dataset.</p>
<p><strong>Iterable</strong> is something I can call the function
<code>iter()</code> on. Eg: list is an iterable.</p>
<p>All the <strong>container</strong> are iterable. Eg: dicts</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">d = {<span class="number">1</span>:<span class="string">"a"</span>,<span class="number">2</span>:<span class="string">"b"</span>}</span><br><span class="line">e = <span class="built_in">iter</span>(d)</span><br><span class="line"><span class="comment"># return the key of dict</span></span><br><span class="line"><span class="built_in">next</span>(e)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>1</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">it = <span class="built_in">iter</span>(iterable)</span><br><span class="line"><span class="keyword">while</span> true:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        a  =<span class="built_in">next</span>(t)</span><br><span class="line">    <span class="keyword">except</span> SropIteration:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="itertools">Itertools</h2>
<ul>
<li>Group By</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">a_list = [(<span class="string">"Animal"</span>, <span class="string">"cat"</span>), </span><br><span class="line">          (<span class="string">"Animal"</span>, <span class="string">"dog"</span>), </span><br><span class="line">          (<span class="string">"Bird"</span>, <span class="string">"peacock"</span>), </span><br><span class="line">          (<span class="string">"Bird"</span>, <span class="string">"pigeon"</span>)]</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">an_iterator = itertools.groupby(a_list, <span class="keyword">lambda</span> x : x[<span class="number">0</span>])</span><br><span class="line">  </span><br><span class="line"><span class="keyword">for</span> key, group <span class="keyword">in</span> an_iterator:</span><br><span class="line">    key_and_group = {key : <span class="built_in">list</span>(group)}</span><br><span class="line">    <span class="built_in">print</span>(key_and_group)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'Animal': [('Animal', 'cat'), ('Animal', 'dog')]}
{'Bird': [('Bird', 'peacock'), ('Bird', 'pigeon')]}</code></pre>
<h3 id="it.product-将两个list一一对应形成一系列tuple"><code>it.product</code>
将两个list一一对应形成一系列tuple</h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools <span class="keyword">as</span> it</span><br><span class="line">suits = <span class="string">"♦♣♥♠"</span></span><br><span class="line">ranks = [<span class="built_in">str</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="number">11</span>)] + <span class="built_in">list</span>(<span class="string">"JQKA"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cards = it.product(ranks, suits)</span><br><span class="line"><span class="built_in">next</span>(cards)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>('2', '♦')</code></pre>
<p>iter.product 不能shuffle</p>
<p>Error: object of type "itertools.product" has no len()</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">random.shuffle(cards)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

c:\Users\Jun\Documents\Courses\Stats 507\CourseNote.ipynb Cell 143' in &lt;module&gt;
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000142?line=0'&gt;1&lt;/a&gt; import random
----&gt; &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000142?line=1'&gt;2&lt;/a&gt; random.shuffle(cards)


File C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.752.0_x64__qbz5n2kfra8p0\lib\random.py:391, in Random.shuffle(self, x, random)
    &lt;a href='file:///c%3A/Program%20Files/WindowsApps/PythonSoftwareFoundation.Python.3.10_3.10.752.0_x64__qbz5n2kfra8p0/lib/random.py?line=388'&gt;389&lt;/a&gt; if random is None:
    &lt;a href='file:///c%3A/Program%20Files/WindowsApps/PythonSoftwareFoundation.Python.3.10_3.10.752.0_x64__qbz5n2kfra8p0/lib/random.py?line=389'&gt;390&lt;/a&gt;     randbelow = self._randbelow
--&gt; &lt;a href='file:///c%3A/Program%20Files/WindowsApps/PythonSoftwareFoundation.Python.3.10_3.10.752.0_x64__qbz5n2kfra8p0/lib/random.py?line=390'&gt;391&lt;/a&gt;     for i in reversed(range(1, len(x))):
    &lt;a href='file:///c%3A/Program%20Files/WindowsApps/PythonSoftwareFoundation.Python.3.10_3.10.752.0_x64__qbz5n2kfra8p0/lib/random.py?line=391'&gt;392&lt;/a&gt;         # pick an element in x[:i+1] with which to exchange x[i]
    &lt;a href='file:///c%3A/Program%20Files/WindowsApps/PythonSoftwareFoundation.Python.3.10_3.10.752.0_x64__qbz5n2kfra8p0/lib/random.py?line=392'&gt;393&lt;/a&gt;         j = randbelow(i + 1)
    &lt;a href='file:///c%3A/Program%20Files/WindowsApps/PythonSoftwareFoundation.Python.3.10_3.10.752.0_x64__qbz5n2kfra8p0/lib/random.py?line=393'&gt;394&lt;/a&gt;         x[i], x[j] = x[j], x[i]


TypeError: object of type 'itertools.product' has no len()</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(cards)</span><br><span class="line"><span class="comment"># list(cards)</span></span><br><span class="line"><span class="comment"># 第二次list(iterator)返回空集，因为iterator已经遍历完了</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>[('2', '♣'),
 ('2', '♥'),
 ('2', '♠'),
 ('3', '♦'),
 ('3', '♣'),
 ('3', '♥'),
 ('3', '♠'),
 ('4', '♦'),
 ('4', '♣'),
 ('4', '♥'),
 ('4', '♠'),
 ('5', '♦'),
 ('5', '♣'),
 ('5', '♥'),
 ('5', '♠'),
 ('6', '♦'),
 ('6', '♣'),
 ('6', '♥'),
 ('6', '♠'),
 ('7', '♦'),
 ('7', '♣'),
 ('7', '♥'),
 ('7', '♠'),
 ('8', '♦'),
 ('8', '♣'),
 ('8', '♥'),
 ('8', '♠'),
 ('9', '♦'),
 ('9', '♣'),
 ('9', '♥'),
 ('9', '♠'),
 ('10', '♦'),
 ('10', '♣'),
 ('10', '♥'),
 ('10', '♠'),
 ('J', '♦'),
 ('J', '♣'),
 ('J', '♥'),
 ('J', '♠'),
 ('Q', '♦'),
 ('Q', '♣'),
 ('Q', '♥'),
 ('Q', '♠'),
 ('K', '♦'),
 ('K', '♣'),
 ('K', '♥'),
 ('K', '♠'),
 ('A', '♦'),
 ('A', '♣'),
 ('A', '♥'),
 ('A', '♠')]</code></pre>
<h3 id="随机list">随机list</h3>
<ul>
<li>Only List</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">a = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line">random.shuffle(a)</span><br><span class="line">a</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[2, 1, 4, 3, 0]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(cards)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(cards)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[]</code></pre>
<p>Only can list once. 第二次为空，除非重新iter.product</p>
<h3 id="iterable-can-be-infinite">iterable can be infinite</h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">natural = itertools.count()</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Never stop</span></span><br><span class="line"><span class="built_in">next</span>(natural)</span><br><span class="line"><span class="comment"># No `list(natural)` : because it is infinite</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>0</code></pre>
<h3 id="itertools.islice"><code>itertools.islice</code></h3>
<ul>
<li>Can not slice iterable, unless use <code>islice</code></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">natural = itertools.count()</span><br><span class="line"><span class="comment"># 0-37</span></span><br><span class="line">naturalsTo38 = itertools.islice(natural,<span class="number">38</span>)</span><br><span class="line"><span class="built_in">list</span>(naturalsTo38)</span><br><span class="line"><span class="comment"># 76， 因为natural是一个iterator，上一句在37结束，下一句从38开始做第一个，然后从38个以后也就是76开始</span></span><br><span class="line">naturals38 = itertools.islice(natural,<span class="number">38</span>,<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">next</span>(naturals38)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>76</code></pre>
<h1 id="generators">Generators</h1>
<ul>
<li>is a type of iterator</li>
<li><code>yield</code>: reserved word
<ul>
<li>直到最后一个之后，return StopIteration</li>
<li>能够从上次结束的位置开始，<strong>无需重新循环一遍</strong></li>
<li>有点类似<code>return</code>,按顺序每次返回一个数，返回的type是generator</li>
</ul></li>
</ul>
<h3 id="yield"><code>yield</code></h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">one</span>():</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">one()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;generator object one at 0x000001CE21C93D80&gt;</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_first_iter = one()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">next</span>(my_first_iter)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>1</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">ten</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        <span class="keyword">yield</span> i**<span class="number">2</span></span><br><span class="line">my_2nd_iter = ten()</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">next</span>(my_2nd_iter)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>0</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">gen</span>():</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">4</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">5</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line">g = gen()</span><br><span class="line"><span class="built_in">list</span>(g)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1, 2, 3, 4, 5, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre>
<h4 id="generate-the-perfect-numbers">Generate the perfect numbers</h4>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">divisors</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">return</span> [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n) <span class="keyword">if</span> n%i==<span class="number">0</span>]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_perfect</span>(<span class="params">i</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(divisors(i))==i</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">perfect_numbers</span>():</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> is_perfect(i):</span><br><span class="line">            <span class="keyword">yield</span> i</span><br><span class="line">        i+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">perfects = perfect_numbers()</span><br><span class="line"><span class="comment"># 这里不能直接next(perfect_numbers()), 否则一直是第一个数</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">next</span>(perfects)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>0</code></pre>
<h1 id="exceptions">Exceptions</h1>
<ul>
<li>exception is object</li>
<li>https://docs.python.org/3/library/exceptions.html</li>
<li>常用：ValueError, TypeError, RuntimeError</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> can_do_thing():</span><br><span class="line">    do_thing()</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    handle_error()</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    do_thing()</span><br><span class="line"><span class="keyword">except</span> NoCanDo:</span><br><span class="line">    handle_error()</span><br></pre></td></tr></tbody></table></figure>
<p>Never:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    do_thing()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    handle_error()</span><br></pre></td></tr></tbody></table></figure>
<p>Never:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    do_thing()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">d = {<span class="number">1</span>:<span class="number">2</span>}</span><br><span class="line"><span class="keyword">if</span> <span class="number">1</span> <span class="keyword">in</span> d:</span><br><span class="line">    <span class="built_in">print</span>(d[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"1 not in"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(d[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">except</span> KeyError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"key not in via excepttion"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2</code></pre>
<h1 id="files">Files</h1>
<ul>
<li><code>open(filename,mode)</code> default: read only
<ul>
<li>reading,writing,or appending</li>
<li>text or binary(.dat)</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(<span class="string">"readme.txt"</span>):</span><br><span class="line">    <span class="built_in">print</span>(line)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

FileNotFoundError                         Traceback (most recent call last)

c:\Users\Jun\Documents\Courses\Stats 507\CourseNote.ipynb Cell 171' in &lt;module&gt;
----&gt; &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000170?line=0'&gt;1&lt;/a&gt; for line in open("readme.txt"):
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000170?line=1'&gt;2&lt;/a&gt;     print(line)


FileNotFoundError: [Errno 2] No such file or directory: 'readme.txt'</code></pre>
<h1 id="formatting-strings">Formatting strings</h1>
<ul>
<li>% (old)</li>
<li>string.format()</li>
<li>f_strings(newest)</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">topping = <span class="string">"tomato"</span></span><br><span class="line"><span class="string">"my fav pizza is %s"</span> % topping</span><br><span class="line"><span class="string">"my fav pizza is {}"</span>.<span class="built_in">format</span>(topping)</span><br><span class="line"><span class="string">"my fav pizza is {topping}"</span>.<span class="built_in">format</span>(topping=topping)</span><br><span class="line"><span class="string">f"my fav pizza is <span class="subst">{topping}</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Exercise: Weather in Ann Arbor</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">!head <span class="number">3</span>/a2temps.dat</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'head' �����ڲ����ⲿ���Ҳ���ǿ����еĳ���
���������ļ���</code></pre>
<p><code>*variate</code>可以用作多个data一次性赋值list：packing</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">'3/a2temps.dat'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    tbl1 = <span class="built_in">list</span>(itertools.islice(f,<span class="number">2</span>,<span class="number">2</span>+<span class="number">3</span>))</span><br><span class="line">    month,*data = tbl1[<span class="number">0</span>].strip().split(<span class="string">","</span>)</span><br><span class="line">data[:<span class="number">5</span>]</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>['206', '267', '261', '228', '139']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">month,*data = <span class="built_in">map</span>(<span class="built_in">int</span>,tbl1[<span class="number">0</span>].strip().split(<span class="string">","</span>))</span><br><span class="line">data[:<span class="number">5</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[206, 267, 261, 228, 139]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">parse_table</span>(<span class="params">txt</span>):</span><br><span class="line">    d = {}</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> txt:</span><br><span class="line">        month,*data = <span class="built_in">map</span>(<span class="built_in">int</span>,line.strip().split(<span class="string">","</span>))</span><br><span class="line">        d[month] = data</span><br><span class="line">    <span class="keyword">return</span> d</span><br></pre></td></tr></tbody></table></figure>
<p><code>repr()</code> is what python actually sees</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">a2temps = {}</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">'3/a2temps.dat'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    lines = []</span><br><span class="line">    current_year = <span class="number">1891</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        line = line.strip()</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(line) == <span class="number">4</span>:</span><br><span class="line">            a2temps[current_year] = parse_table(lines)</span><br><span class="line">            lines = []</span><br><span class="line">            current_year = <span class="built_in">int</span>(line)</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">len</span>(line) &gt; <span class="number">4</span>:</span><br><span class="line">            lines.append(line)</span><br><span class="line"><span class="comment"># a2temps[year][month][day]</span></span><br><span class="line">a2temps[<span class="number">1893</span>][<span class="number">1</span>][:<span class="number">5</span>]</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>[-6, 0, -83, -94, -72]</code></pre>
<h1 id="generator">Generator</h1>
<ul>
<li>expression like list, but create iterator</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = Squares() <span class="comment"># infinite</span></span><br><span class="line"><span class="comment"># Error: [x**2 for x in s]</span></span><br><span class="line">sggen = (x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> s)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">even</span>():</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line">        i+=<span class="number">2</span></span><br><span class="line"></span><br><span class="line">e = even()</span><br><span class="line"><span class="built_in">next</span>(e),<span class="built_in">next</span>(e),<span class="built_in">next</span>(e)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(0, 2, 4)</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gen = (e**<span class="number">2</span> <span class="keyword">for</span> e <span class="keyword">in</span> even())</span><br><span class="line">gen</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;generator object &lt;genexpr&gt; at 0x000001CEF3932CE0&gt;</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">next</span>(gen),<span class="built_in">next</span>(gen),<span class="built_in">next</span>(gen)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(0, 4, 16)</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">r = <span class="built_in">range</span>(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">sum</span>(</span><br><span class="line">    (rr**<span class="number">2</span> <span class="keyword">for</span> rr <span class="keyword">in</span> r)</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>285</code></pre>
<h1 id="lambda-expressions"><code>lambda</code> expressions</h1>
<ul>
<li>define functions without <code>def</code></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="keyword">lambda</span> x: x**<span class="number">2</span></span><br><span class="line">f(<span class="number">10</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>100</code></pre>
<h1 id="any-and-all"><code>any()</code> and <code>all()</code></h1>
<ul>
<li>argument must be iterator</li>
<li><code>any()</code> return True if and only if one or more is
True:</li>
<li>0,0.0,empty string, empty list, is False</li>
<li><code>all()</code> return True if all is true</li>
<li></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">any</span>((<span class="number">0</span>,<span class="number">0.0</span>,<span class="string">""</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>False</code></pre>
<h1 id="reading-csv-and-txt">Reading csv and txt</h1>
<p><code>open()</code> is an iterable</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">'4/example2.txt'</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">    <span class="built_in">print</span>(line.strip().split(<span class="string">","</span>))</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>['1', '2', '3', '4']
['5', '6', '7', '8']
['9', '10', '11', '12']</code></pre>
<h2 id="reading-csv-with-a-header">Reading csv with a header</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">open</span>(<span class="string">"4/example3.txt"</span>).read())</span><br></pre></td></tr></tbody></table></figure>
<pre><code>col1,col2,col3,col4
1,2,3,4
5,6,7,8
9,10,11,12</code></pre>
<p>​</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">'4/example3.txt'</span>)</span><br><span class="line">header = <span class="built_in">next</span>(f).strip().split(<span class="string">","</span>)</span><br><span class="line">data =[]</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">    data.append(line.strip().split(<span class="string">","</span>))</span><br><span class="line">header,data</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(['col1', 'col2', 'col3', 'col4'],
 [['1', '2', '3', '4'], ['5', '6', '7', '8'], ['9', '10', '11', '12']])</code></pre>
<h2 id="using-pandas-to-read-and-write-csv">using pandas to read and
write csv</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">pd.read_csv(<span class="string">"4/example3.txt"</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }


    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }

</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
col1
</th>
<th>
col2
</th>
<th>
col3
</th>
<th>
col4
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
1
</td>
<td>
2
</td>
<td>
3
</td>
<td>
4
</td>
</tr>
<tr>
<th>
1
</th>
<td>
5
</td>
<td>
6
</td>
<td>
7
</td>
<td>
8
</td>
</tr>
<tr>
<th>
2
</th>
<td>
9
</td>
<td>
10
</td>
<td>
11
</td>
<td>
12
</td>
</tr>
</tbody>
</table>
</div>
<h2 id="reading-bytes-from-a-file">Reading bytes from a file</h2>
<ul>
<li><code>file.read(b)</code> will read b bytes from a file.</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">'4/example3.txt'</span>,<span class="string">'rb'</span>)</span><br><span class="line">b = f.read(<span class="number">4</span>)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b,<span class="built_in">type</span>(b)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(b'col1', bytes)</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Error:TypeError: can't concat str to bytes</span></span><br><span class="line"><span class="comment"># print(b+"2345")</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(b.decode(<span class="string">"ascii"</span>)+<span class="string">"2345"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>col12345</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>(b.decode(<span class="string">"ascii"</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>str</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#character</span></span><br><span class="line"><span class="built_in">print</span>(b.decode(<span class="string">"ascii"</span>))</span><br><span class="line"><span class="comment"># integer, big endian encoding</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>.from_bytes(b,<span class="string">'big'</span>))</span><br><span class="line"><span class="comment"># integer, little endian encoding</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>.from_bytes(b,<span class="string">'little'</span>))</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="comment"># to Float</span></span><br><span class="line"><span class="built_in">print</span>(struct.unpack(<span class="string">'f'</span>,b))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>col1
1668246577
829189987
(3.4405835958040143e-09,)</code></pre>
<h1 id="object">Object</h1>
<ul>
<li>everything in python is an object</li>
<li>object-oriented programming</li>
<li><code>class</code> name in CamelCase</li>
<li>Object &amp; instance</li>
<li>attribute
<ul>
<li>attributeobject embedded: object have other object as their
attributes.</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Instantiation: instance(object) p of the class Point</span></span><br><span class="line">p = Point()</span><br><span class="line"><span class="built_in">type</span>(p)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>__main__.Point</code></pre>
<p>Constructor:</p>
<ul>
<li><p>__开始的函数</p></li>
<li><p><code>__init__()</code> is to initialize the object</p></li>
<li><p><code>self</code>, refer to the object itself: DON'T
FORGET!</p></li>
<li></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># invisiblely : __init__: initialize the method</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,x,y</span>):</span><br><span class="line">        <span class="built_in">print</span>(self,x,y)</span><br><span class="line">        self.x =x</span><br><span class="line">        self.y = y</span><br><span class="line">p = Point(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(p.x,p.y)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;__main__.Point object at 0x000001CF0323E8F0&gt; 1 1
1 1</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,x,y</span>):</span><br><span class="line">        self.x =x</span><br><span class="line">        self.y = y</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">norm</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># DON'T FORGET: self</span></span><br><span class="line">        <span class="keyword">return</span> math.sqrt(self.x**<span class="number">2</span>+self.y**<span class="number">2</span>)</span><br><span class="line">p = Point(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">p.norm()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>1.4142135623730951</code></pre>
<h3 id="tictoctoe">TicTocToe</h3>
<ul>
<li>Define Private Variable in Python: <code>_variable</code>.
<strong>[Convention]</strong></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TicTacToe</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>():</span><br><span class="line">        self._board = [</span><br><span class="line">            [<span class="literal">None</span>,<span class="literal">None</span>,<span class="literal">None</span>],</span><br><span class="line">            [<span class="literal">None</span>,<span class="literal">None</span>,<span class="literal">None</span>],</span><br><span class="line">            [<span class="literal">None</span>,<span class="literal">None</span>,<span class="literal">None</span>]</span><br><span class="line">        ]</span><br><span class="line">        self._turn = <span class="string">"X"</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move</span>(<span class="params">self,i,j</span>):</span><br><span class="line">        <span class="keyword">if</span> self._board[i][j] <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"square is occupied"</span>)</span><br><span class="line">        self._board[i][j] = self._turn</span><br><span class="line">        <span class="keyword">if</span> self._turn == <span class="string">"X"</span>:</span><br><span class="line">            self._turn = <span class="string">"O"</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self._turn = <span class="string">"X"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">winner</span>(<span class="params">board</span>):</span><br><span class="line">        winning_combinations = [</span><br><span class="line">            [(x, y), (x + a, y + b), (x + <span class="number">2</span> * a, y + <span class="number">2</span> * b)]</span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>)</span><br><span class="line">            <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>)</span><br><span class="line">            <span class="keyword">for</span> a <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">for</span> b <span class="keyword">in</span> <span class="built_in">range</span>(-<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">max</span>(a, b) &gt; <span class="number">0</span></span><br><span class="line">        ]</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> winning_combinations:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                s = {board[x][y] <span class="keyword">for</span> x, y <span class="keyword">in</span> w}</span><br><span class="line">                sq = s.pop()</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(s) == <span class="number">0</span> <span class="keyword">and</span> sq <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    <span class="keyword">return</span> sq</span><br><span class="line">            <span class="keyword">except</span> IndexError:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!tail <span class="number">4</span>/ttt.py</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'tail' �����ڲ����ⲿ���Ҳ���ǿ����еĳ���
���������ļ���</code></pre>
<p><strong>Dunder methods:</strong></p>
<ul>
<li><code>__str__()</code>, show the object as a string
<ul>
<li>use <code>str()</code> to call this function</li>
<li>Or, when use <code>print()</code>, object will be showed as string
format</li>
</ul></li>
</ul>
<h3 id="example-class">Example: <code>class</code></h3>
<ul>
<li>How to specify a <code>constructor</code> in Python:
<ul>
<li><code>__init__()</code></li>
<li>dunder method</li>
<li></li>
</ul></li>
</ul>
<p><strong>The splat operator: <code>*args</code></strong>: any number
of arguments</p>
<ul>
<li>return a tuple</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">splat</span>(<span class="params">*args</span>):</span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line"></span><br><span class="line">splat(<span class="number">1</span>,<span class="number">2</span>,<span class="string">"hello"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(1, 2, 'hello')</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">splat</span>(<span class="params">a,b,*args</span>):</span><br><span class="line">    <span class="built_in">print</span>(a,b,args)</span><br><span class="line">splat(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1 2 (3, 4)</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">splat</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="built_in">print</span>(a,b)</span><br><span class="line">splat(a=<span class="number">1</span>,b=<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1 2</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">splat</span>(<span class="params">a,b,*args</span>):</span><br><span class="line">    <span class="built_in">print</span>(a,b,args)</span><br><span class="line">splat(a=<span class="number">1</span>,b=<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Error: splat(a=1,b=2,3)</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>1 2 ()</code></pre>
<p>传递值时的不同</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">splat(*[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]) <span class="comment"># spat(1,2,3,4)</span></span><br><span class="line"><span class="comment"># not = splat([1,2,3,4])</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>1 2 (3, 4)</code></pre>
<p><code>**kwargs</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">splat</span>(<span class="params">**kwargs</span>):</span><br><span class="line">    <span class="keyword">for</span> key,value <span class="keyword">in</span> kwargs.items():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"{0}={1}"</span>.<span class="built_in">format</span>(key,value))</span><br><span class="line">splat(name=<span class="string">"jun"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>name=jun</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>():</span><br><span class="line">    <span class="string">"A vector of real numbers"</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,*args</span>):</span><br><span class="line">        <span class="keyword">from</span> numbers <span class="keyword">import</span> Number</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">all</span>(<span class="built_in">isinstance</span>(arg,Number) <span class="keyword">for</span> arg <span class="keyword">in</span> args):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"Vector requires numerical data"</span>)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">        self._val = <span class="built_in">tuple</span>(args)</span><br><span class="line">v = Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="comment"># Vector.__init__ = __init__</span></span><br><span class="line"><span class="comment"># Vector(1,2,3,[])</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><code>isinstance(arg,Number)</code> check if it is a number</p>
<p><code>Vector.__init__ = __init__</code>
函数可以=，让两个函数相等,这里直接给class中添加后面的函数</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">dim</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(self._val)</span><br><span class="line">Vector.dim = dim</span><br><span class="line">v = Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">v.dim()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>3</code></pre>
<p>Decorate:<code>@property</code></p>
<ul>
<li>被标记的方法是属性</li>
<li>无法随意修改属性内容</li>
<li>调用时函数名后面可以不用加括号</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@property</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dim</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(self._val)</span><br><span class="line">Vector.dim = dim</span><br><span class="line">v = Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">v.dim</span><br><span class="line"><span class="comment"># Error: v.dim()</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>3</code></pre>
<p>Dunder Method</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(self._val)</span><br><span class="line">Vector.__len__ = __len__</span><br><span class="line">v = Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="comment"># Error: v.len()</span></span><br><span class="line"><span class="built_in">len</span>(v)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>3</code></pre>
<p><code>__getitem__</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self,i</span>):</span><br><span class="line">    <span class="keyword">return</span> self._val[i]</span><br><span class="line"></span><br><span class="line">Vector.__getitem__ = __getitem__</span><br><span class="line">Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)[<span class="number">0</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1</code></pre>
<p>Iteration: <code>iter</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="comment"># 等价于：return iter(self._val)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self)):</span><br><span class="line">        <span class="keyword">yield</span> self[i]</span><br><span class="line">        </span><br><span class="line">Vector.__iter__ = __iter__</span><br><span class="line"><span class="keyword">for</span> v <span class="keyword">in</span> Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>):</span><br><span class="line">    <span class="built_in">print</span>(v)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1
2
3</code></pre>
<p><code>stopiteration</code>的条件可以在<code>__next__</code>里面定义，同时更新self._val:<code>return self._val</code></p>
<p><code>__iter__</code>可以直接return self</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">    s = <span class="string">", "</span>.join(<span class="built_in">map</span>(<span class="built_in">str</span>,self))</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"("</span> + s + <span class="string">")"</span></span><br><span class="line"></span><br><span class="line">Vector.__str__ = __str__</span><br><span class="line">v = Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(v)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(1, 2, 3)</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Vector"</span>+<span class="built_in">str</span>(self)</span><br><span class="line">Vector.__repr__ = __repr__</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>x+y in python:</p>
<ul>
<li>try x.__add__(y)</li>
<li>if fails, Python tries y.__radd__(x)</li>
<li>if fails, Python raises TypeError</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self, other</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(other, Vector):</span><br><span class="line">        <span class="keyword">if</span> self.dim == other.dim:</span><br><span class="line">            <span class="keyword">return</span> Vector(*[x + y <span class="keyword">for</span> x, y <span class="keyword">in</span> <span class="built_in">zip</span>(self, other)])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"not the same dim"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vector.__add__ = __add__</span><br><span class="line">Vector(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) + Vector(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Vector(5, 7, 9)</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v = Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">next</span>(v)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;generator object __next__ at 0x000001AE30025FC0&gt;</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">zip</span>(Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>),Vector(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>)))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[(1, 4), (2, 5), (3, 6)]</code></pre>
<p><strong>Notes</strong>:</p>
<ul>
<li>We used a new operator
<code>*[x + y for x, y in zip(self, other)]</code>. This is called the
"splat" operator. It takes all the items in the list (or iterable more
generally) and passes them in as function arguments.</li>
<li><code>NotImplemented</code> is a special Python value signifying
that the operation is not implemented. Here we do not allow anything to
be added to a vector except another vector.</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__mul__</span>(<span class="params">self, other</span>):</span><br><span class="line">    <span class="keyword">from</span> numbers <span class="keyword">import</span> Number</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(other, Number):</span><br><span class="line">        <span class="keyword">return</span> Vector(*[other * x <span class="keyword">for</span> x <span class="keyword">in</span> self])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vector.__mul__ = __mul__</span><br><span class="line">Vector(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) * <span class="number">2</span></span><br><span class="line">Vector.__rmul__ = __mul__</span><br><span class="line"><span class="number">2</span>*Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Vector(2, 4, 6)</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vector.__neg__ = <span class="keyword">lambda</span> self: -<span class="number">1</span>*self</span><br><span class="line">Vector.__sub__ = <span class="keyword">lambda</span> self,other:self+(-other)</span><br><span class="line">Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)-Vector(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Vector(0, 0, 0)</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">dot</span>(<span class="params">self, other</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(a * b <span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(self, other))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vector.dot = dot</span><br><span class="line">Vector(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).dot(Vector(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>8</code></pre>
<h2 id="classmethod"><code>@classmethod</code></h2>
<ul>
<li>A class method is a method which is bound to the class and not the
object of the class.</li>
<li>不需要预先生成一个object</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@classmethod</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ones</span>(<span class="params">cls, d</span>):</span><br><span class="line">    <span class="string">"return the d-dimensional vector of ones"</span></span><br><span class="line">    ones = [<span class="number">1</span>] * d</span><br><span class="line">    <span class="keyword">return</span> cls(*ones)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vector.ones = ones</span><br><span class="line">Vector.ones(<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Vector(1, 1, 1)</code></pre>
<p>Note: 普通方法的话还需要先创建一个instance</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Vector.mean = <span class="keyword">lambda</span> self: <span class="built_in">sum</span>(self) / <span class="built_in">len</span>(self)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">var</span>(<span class="params">self</span>):</span><br><span class="line">    e = Vector.ones(<span class="built_in">len</span>(self))</span><br><span class="line">    s = self - self.mean() * e</span><br><span class="line">    <span class="keyword">return</span> s.dot(s) / (<span class="built_in">len</span>(self) - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vector.var = var</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">Vector.std = <span class="keyword">lambda</span> self: math.sqrt(self.var())</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">X = Vector(*[random.normalvariate(mu=<span class="number">1</span>, sigma=<span class="number">2</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000</span>)])</span><br><span class="line">X.mean(), X.var()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(0.9980224941670806, 4.005165548865144)</code></pre>
<h2 id="dataframe-class">Dataframe class</h2>
<ul>
<li></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args</span>):</span><br><span class="line">        <span class="keyword">import</span> numbers</span><br><span class="line"></span><br><span class="line">        self._val = <span class="built_in">tuple</span>(args)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">all</span>(<span class="built_in">isinstance</span>(x, numbers.Number) <span class="keyword">for</span> x <span class="keyword">in</span> self):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"Input should be a sequence of numbers"</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dim</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self._val)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self._conformable(other):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line">        <span class="keyword">return</span> Vector(*[a + b <span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(self, other)])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__mul__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">import</span> numbers</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(other, numbers.Number):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line">        <span class="keyword">return</span> Vector(*[a * other <span class="keyword">for</span> a <span class="keyword">in</span> self._val])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self._val)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> self._conformable(other):</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">all</span>(a == b <span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(self, other))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dot</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self._conformable(other):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"cannot dot product with a non-conformable vector"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span>(a * b <span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(self, other))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__rmul__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__mul__(other)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">iter</span>(self._val)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, i</span>):</span><br><span class="line">        <span class="keyword">return</span> self._val[i]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"("</span> + <span class="string">", "</span>.join(<span class="built_in">str</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> self._val) + <span class="string">")"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_conformable</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">isinstance</span>(other, Vector) <span class="keyword">and</span> self.dim == other.dim</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">my_iris = {</span><br><span class="line">    <span class="string">'sepal_length'</span>: Vector(<span class="number">5.1</span>, <span class="number">4.9</span>, <span class="number">4.7</span>, <span class="number">4.6</span>, <span class="number">5.0</span>), </span><br><span class="line">    <span class="string">'sepal_width'</span>: Vector(<span class="number">3.5</span>, <span class="number">3.0</span>, <span class="number">3.2</span>, <span class="number">3.1</span>, <span class="number">3.6</span>),</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>positional argument: don't have a name</li>
<li>keyward argument: have a name</li>
<li>所以带变量名字的argument不能传递给positional argument</li>
<li><code>double splat</code>: new operator
<ul>
<li><code>**kwargs</code>: generate a dictionary with keywords</li>
<li>kwargs 不是唯一的，可以命名为别的</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">double_splat</span>(<span class="params">**kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(kwargs)</span><br><span class="line">    <span class="comment"># print("I got passed these args:\n" + str(args))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">double_splat(kw1=<span class="number">1</span>, kw2=<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 等价于</span></span><br><span class="line">kwargs = {<span class="string">'kw1'</span>: <span class="number">1</span>, <span class="string">'kw2'</span>: <span class="number">2</span>}</span><br><span class="line">double_splat(**kwargs)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'kw1': 1, 'kw2': 2}
{'kw1': 1, 'kw2': 2}</code></pre>
<p>If I want to support variable numbers of both keyword and positional
arguments, I can combine both forms of splat:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">both_splat</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"positional args"</span>, args)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"kw args"</span>, kwargs)</span><br><span class="line">    </span><br><span class="line">both_splat(<span class="number">1</span>, <span class="number">2</span>, kw=<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>positional args (1, 2)
kw args {'kw': 3}</code></pre>
<p>Python has some restrictions on the use of splat in functions. The
keyword arguments always come last:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">both_splat</span>(<span class="params">**kwargs, *args</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>  Input In [177]
    def both_splat(**kwargs, *args):
                             ^
SyntaxError: invalid syntax</code></pre>
<p>What if I want a mix of mandatory and optional arguments?</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_optional</span>(<span class="params">a, b, *args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b, args, kwargs)</span><br><span class="line"></span><br><span class="line">some_optional(<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1 2 () {'c': 3}</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DataFrame</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, **kwargs</span>):</span><br><span class="line">        self._data = kwargs    </span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df = DataFrame(col=Vector(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">df</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;__main__.DataFrame at 0x1cf037f11e0&gt;</code></pre>
<p>Keys in dictionary:</p>
<ul>
<li>hashable</li>
<li>unique</li>
<li>keys is a <code>set</code>
<ul>
<li>set is unique</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>} <span class="comment"># set</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1, 2, 3}</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{x+<span class="number">1</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)}</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = {<span class="number">1</span>,<span class="number">2</span>}</span><br><span class="line">b = {<span class="number">2</span>,<span class="number">3</span>}</span><br><span class="line">a&amp;b,a|b</span><br></pre></td></tr></tbody></table></figure>
<pre><code>({2}, {1, 2, 3})</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">frozenset</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">b = <span class="built_in">frozenset</span>([<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

AttributeError                            Traceback (most recent call last)

c:\Users\Jun\Documents\Courses\Stats 507\CourseNote.ipynb Cell 268' in &lt;module&gt;
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000343?line=0'&gt;1&lt;/a&gt; a = frozenset([1,2,3])
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000343?line=1'&gt;2&lt;/a&gt; b = frozenset([4,5,6])
----&gt; &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000343?line=2'&gt;3&lt;/a&gt; a.add(b)


AttributeError: 'frozenset' object has no attribute 'add'</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1, 2, 3}</code></pre>
<ul>
<li>list 不能作为key
<ul>
<li>unhashable</li>
<li>can be change</li>
</ul></li>
<li>set 中不能有list</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>([<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">"a"</span>,<span class="string">"b"</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

c:\Users\Jun\Documents\Courses\Stats 507\CourseNote.ipynb Cell 269' in &lt;module&gt;
----&gt; &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000268?line=0'&gt;1&lt;/a&gt; set([1,1,2,3,"a","b",[1,2,3]])


TypeError: unhashable type: 'list'</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, **kwargs</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">all</span>(<span class="built_in">isinstance</span>(col, Vector) <span class="keyword">for</span> col <span class="keyword">in</span> kwargs.values()):</span><br><span class="line">        <span class="keyword">raise</span> TypeError(<span class="string">"DataFrame columns are Vectors"</span>)</span><br><span class="line">    dims = {<span class="built_in">len</span>(v) <span class="keyword">for</span> v <span class="keyword">in</span> kwargs.values()}  <span class="comment"># set comprehension</span></span><br><span class="line">    <span class="comment"># set 里面的值是unique的</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(dims) &gt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">"All columns must have the same dimension"</span>)</span><br><span class="line"></span><br><span class="line">DataFrame.__init__ = __init__</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

c:\Users\Jun\Documents\Courses\Stats 507\CourseNote.ipynb Cell 282' in &lt;module&gt;
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000272?line=5'&gt;6&lt;/a&gt;     if len(dims) &gt; 1:
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000272?line=6'&gt;7&lt;/a&gt;         raise ValueError("All columns must have the same dimension")
----&gt; &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000272?line=8'&gt;9&lt;/a&gt; DataFrame.__init__ = __init__


NameError: name 'DataFrame' is not defined</code></pre>
<h2 id="inheritance">Inheritance</h2>
<ul>
<li><code>class ChildClass(ParentClass):</code></li>
<li>支持Multiple Inheritance</li>
<li>继承父类中的所有方法</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DataFrame</span>(<span class="title class_ inherited__">dict</span>):</span><br><span class="line">    <span class="string">'a data set consisting of labeled vectors'</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = Vector(<span class="number">1</span>, <span class="number">2</span>); v2 = Vector(<span class="number">3</span>, <span class="number">4</span>); df = DataFrame(col1=v1, col2=v2)</span><br><span class="line">df[<span class="string">'col1'</span>], <span class="built_in">len</span>(df), <span class="built_in">list</span>(df)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(&lt;__main__.Vector at 0x1cf037f0e50&gt;, 2, ['col1', 'col2'])</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isinstance</span>(df, <span class="built_in">dict</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>True</code></pre>
<p>The validation code we wrote above will not automatically apply. We
need to <em>override</em> the default <code>__init__</code> method of
<code>DataFrame</code> with our own:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DataFrame.__init__ = __init__</span><br><span class="line">DataFrame(col1=v1, col2=v2)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{}</code></pre>
<h2 id="super-constructor">Super constructor</h2>
<ul>
<li>父类中也有一个__init__</li>
<li>如果不加super constructor 就没有initialize the thing that hold the
object</li>
<li>只需要call it in init function</li>
<li></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, **kwargs</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">all</span>(<span class="built_in">isinstance</span>(col, Vector) <span class="keyword">for</span> col <span class="keyword">in</span> kwargs.values()):</span><br><span class="line">        <span class="keyword">raise</span> TypeError(<span class="string">"DataFrame columns are Vectors"</span>)</span><br><span class="line">    dims = {<span class="built_in">len</span>(v) <span class="keyword">for</span> v <span class="keyword">in</span> kwargs.values()}  <span class="comment"># set comprehension</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(dims) &gt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">"All columns must have the same dimension"</span>)</span><br><span class="line">    <span class="built_in">dict</span>.__init__(self, **kwargs)  <span class="comment"># call superconstructor</span></span><br><span class="line"></span><br><span class="line">DataFrame.__init__ = __init__</span><br><span class="line">DataFrame(col1=v1, col2=v2)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'col1': &lt;__main__.Vector at 0x1cf037f0e50&gt;,
 'col2': &lt;__main__.Vector at 0x1cf037f3670&gt;}</code></pre>
<p>This <code>__init__</code> function is okay, but has the deficiency
that it doesn't allow us to create DataFrames in other, more flexible
ways. For example, we can create a <code>dict</code> as follows:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kv = [(<span class="number">1</span>, Vector(<span class="number">1</span>)), (<span class="number">2</span>, Vector(<span class="number">2</span>))]  <span class="comment"># key-value pairs</span></span><br><span class="line"><span class="built_in">dict</span>(kv)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1: &lt;__main__.Vector at 0x1cf037f22f0&gt;, 2: &lt;__main__.Vector at 0x1cf037f0640&gt;}</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Not work for our Data Frame</span></span><br><span class="line">DataFrame(kv)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

c:\Users\Jun\Documents\Courses\Stats 507\CourseNote.ipynb Cell 281' in &lt;module&gt;
      &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000283?line=0'&gt;1&lt;/a&gt; # Not work for our Data Frame
----&gt; &lt;a href='vscode-notebook-cell:/c%3A/Users/Jun/Documents/Courses/Stats%20507/CourseNote.ipynb#ch0000283?line=1'&gt;2&lt;/a&gt; DataFrame(kv)


TypeError: __init__() takes 1 positional argument but 2 were given</code></pre>
<ul>
<li>More General way:<code>__init__(self, *args, **kwargs)</code></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">dict</span>.__init__(self, *args, **kwargs)  <span class="comment"># call superconstructor</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">all</span>(<span class="built_in">isinstance</span>(col, Vector) <span class="keyword">for</span> col <span class="keyword">in</span> self.values()):</span><br><span class="line">        <span class="keyword">raise</span> TypeError(<span class="string">"DataFrame columns are Vectors"</span>)</span><br><span class="line">    dims = {<span class="built_in">len</span>(v) <span class="keyword">for</span> v <span class="keyword">in</span> self.values()}  <span class="comment"># set comprehension</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(dims) &gt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">"All columns must have the same dimension"</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">DataFrame.__init__ = __init__</span><br><span class="line">DataFrame(col1=v1, col2=v2)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'col1': &lt;__main__.Vector at 0x1cf037f0e50&gt;,
 'col2': &lt;__main__.Vector at 0x1cf037f3670&gt;}</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Now we can do</span></span><br><span class="line">DataFrame(kv)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1: &lt;__main__.Vector at 0x1cf037f22f0&gt;, 2: &lt;__main__.Vector at 0x1cf037f0640&gt;}</code></pre>
<ul>
<li>Python 中不常用继承：
<ul>
<li>因为继承会继承父类所有的method， 有时候合并数据之类的会比较奇怪</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DataFrame(col1=v1, col2=v2) | {<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>}</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'col1': &lt;__main__.Vector at 0x1cf037f0e50&gt;,
 'col2': &lt;__main__.Vector at 0x1cf037f3670&gt;,
 'a': 1,
 'b': 2}</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d = {<span class="number">1</span>:<span class="number">2</span>}</span><br><span class="line">d.update(hello=<span class="number">3</span>)</span><br><span class="line">d</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1: 2, 'hello': 3}</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = DataFrame(col1=v1, col2=v2)</span><br><span class="line">df.update(col2=<span class="string">'uh oh'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(df))</span><br><span class="line">df</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;class '__main__.DataFrame'&gt;





{'col1': &lt;__main__.Vector at 0x1cf037f0e50&gt;, 'col2': 'uh oh'}</code></pre>
<h2 id="overide">Overide</h2>
<ul>
<li>overide the original function by using the original function</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, x</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(x,<span class="built_in">tuple</span>):</span><br><span class="line">        <span class="comment"># unpack a tuple!!!</span></span><br><span class="line">        k,i=x</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dict</span>.__getitem__(self,k)[i]</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dict</span>.__getitem__(self, x)</span><br><span class="line"></span><br><span class="line">DataFrame.__getitem__ = __getitem__</span><br><span class="line">DataFrame(col1=v2, col2=v2)[<span class="string">'col1'</span>, <span class="number">0</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>3</code></pre>
<h1 id="iterating-over-observations">Iterating over observations</h1>
<p>When analyzing data, it will be helpful to iterate over each
observation. Something like:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; df = DataFrame(col1=Vector(1, 2), col2=Vector(3, 4))</span><br><span class="line">&gt;&gt;&gt; for x in df.obs():</span><br><span class="line">&gt;&gt;&gt;    print(x)</span><br><span class="line">&gt;&gt;&gt;    ...</span><br><span class="line">{'col1': 1, 'col2': 3}</span><br><span class="line">{'col1': 2, 'col2': 4}</span><br></pre></td></tr></tbody></table></figure>
<p>To accomplish this, we'll want to zip together the vectors col1 and
col2:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">zip</span>(Vector(<span class="number">1</span>, <span class="number">2</span>), Vector(<span class="number">3</span>, <span class="number">4</span>)))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[(1, 3), (2, 4)]</code></pre>
<p>We will use this behavior to construct a second kind of iterator for
our class:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">obs</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="string">'Yields each observation as column-value dict'</span></span><br><span class="line">    <span class="keyword">for</span> vals <span class="keyword">in</span> <span class="built_in">zip</span>(self.values()):</span><br><span class="line">        <span class="keyword">yield</span> <span class="built_in">dict</span>(<span class="built_in">zip</span>(self, vals))</span><br></pre></td></tr></tbody></table></figure>
<p>Let's try it out:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DataFrame.obs = obs</span><br><span class="line"><span class="keyword">for</span> ob <span class="keyword">in</span> DataFrame(col1=v1, col2=v2, col3=v1).obs():</span><br><span class="line">    <span class="built_in">print</span>(ob)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'col1': &lt;__main__.Vector object at 0x000001CF037F0E50&gt;}
{'col1': &lt;__main__.Vector object at 0x000001CF037F3670&gt;}
{'col1': &lt;__main__.Vector object at 0x000001CF037F0E50&gt;}</code></pre>
<p>因为问题出现在obs()中zip函数里，里面传的两个object组成的list，应该要加一个*，这样可以传递vector内部的值</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">obs</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="string">'Yields each observation as column-value dict'</span></span><br><span class="line">    <span class="keyword">for</span> vals <span class="keyword">in</span> <span class="built_in">zip</span>(*self.values()):</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">list</span>(self))</span><br><span class="line">        <span class="comment"># 这里self返回的是key值</span></span><br><span class="line">        <span class="keyword">yield</span> <span class="built_in">dict</span>(<span class="built_in">zip</span>(self, vals))</span><br><span class="line">DataFrame.obs = obs</span><br><span class="line"><span class="keyword">for</span> ob <span class="keyword">in</span> DataFrame(col1=v1, col2=v2, col3=v1).obs():</span><br><span class="line">    <span class="built_in">print</span>(ob)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['col1', 'col2', 'col3']
{'col1': 1, 'col2': 3, 'col3': 1}
['col1', 'col2', 'col3']
{'col1': 2, 'col2': 4, 'col3': 2}</code></pre>
<p>Note: 字典的list是key的list</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = {<span class="string">"a"</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="string">"b"</span>:[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]}</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> a:</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>a
b</code></pre>
<p>Note: <code>zip()</code> 可以形成一个一一对应的tuple
Python中很重要的概念就是iteration，要好好理解，有很多不同的用法</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">it = <span class="built_in">zip</span>(*df.values())</span><br><span class="line">vals = <span class="built_in">next</span>(it)</span><br><span class="line"><span class="built_in">list</span>(<span class="built_in">zip</span>(df,vals))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[('col1', 1), ('col2', 'u')]</code></pre>
<p>Note: <code>**args</code>也可以理解为unpack every thing</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 0 1 2 3 4 5 ...</span></span><br><span class="line"><span class="comment"># 1 2 3 4 5 6 ...</span></span><br><span class="line"><span class="comment"># 2 3 4 5 6 7 ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">windowed</span>(<span class="params">iterable, k</span>):</span><br><span class="line">    <span class="string">'(x[1], x[2], ...) -&gt; [(x[1], ..., x[k]), (x[k], ..., x[k+1]), ...]'</span></span><br><span class="line">    <span class="comment"># k copies of iterable</span></span><br><span class="line">    iters = itertools.tee(iterable, k)</span><br><span class="line"></span><br><span class="line">    offsetted = [itertools.islice(it, i, <span class="literal">None</span>) <span class="keyword">for</span> i, it <span class="keyword">in</span> <span class="built_in">enumerate</span>(iters)]</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">zip</span>(*offsetted)</span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span>(windowed(<span class="built_in">range</span>(<span class="number">10</span>), <span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[(0, 1, 2),
 (1, 2, 3),
 (2, 3, 4),
 (3, 4, 5),
 (4, 5, 6),
 (5, 6, 7),
 (6, 7, 8),
 (7, 8, 9)]</code></pre>
<h1 id="map-filter-and-reduce">map, filter, and reduce</h1>
<ul>
<li><code>map</code> applies a function to every element, yield a new
sequence(iterator)</li>
<li><code>filter</code> remove some element(TRUE or FALSE)</li>
<li></li>
<li></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x**<span class="number">2</span>+<span class="number">1</span>,<span class="built_in">range</span>(<span class="number">10</span>)))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1, 2, 5, 10, 17, 26, 37, 50, 65, 82]</code></pre>
<h2 id="map"><code>map</code></h2>
<ul>
<li>2 positional args
<ul>
<li>number of iterables must match arguments in function</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">poly</span>(<span class="params">x,y</span>):</span><br><span class="line">    <span class="keyword">return</span> (x*y)</span><br><span class="line"><span class="built_in">list</span>(<span class="built_in">map</span>(poly,<span class="built_in">range</span>(<span class="number">10</span>),<span class="built_in">range</span>(<span class="number">10</span>,<span class="number">20</span>)))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 11, 24, 39, 56, 75, 96, 119, 144, 171]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x,y: x*y,<span class="built_in">range</span>(<span class="number">10</span>),<span class="built_in">range</span>(<span class="number">10</span>,<span class="number">20</span>)))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 11, 24, 39, 56, 75, 96, 119, 144, 171]</code></pre>
<p><code>filter</code></p>
<ul>
<li>takes a Boolean function</li>
<li>returns only elements that function is TRUE</li>
<li>2nd argument can be any iterator
<ul>
<li>generator</li>
<li>iterator</li>
<li>...</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_even</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span>(x%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line">    <span class="comment"># return x%2==0</span></span><br><span class="line"><span class="built_in">list</span>(<span class="built_in">filter</span>(is_even,<span class="built_in">range</span>(<span class="number">10</span>)))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 2, 4, 6, 8]</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">filter</span>(is_even,(x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)))) <span class="comment"># Filtering a generator</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 4, 16, 36, 64]</code></pre>
<h2 id="reduce"><code>Reduce</code></h2>
<ul>
<li>reduce an iterator to a single element</li>
<li><code>functools</code> contains a bunch of useful functional
programming functions, including reduce</li>
<li><code>functools.reduce</code></li>
<li>By initial an accumulator and repeatedly update the accumulator</li>
<li>If initial value is not supplied, Python will initializes the
accumulator as acc=f(x,y), where x and y are the first two elements of
the iterator.</li>
<li>of the iterator is length 1, it will return that element.</li>
<li>Best to specify the initial value</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"><span class="built_in">print</span>(functools.reduce(<span class="keyword">lambda</span> x,y: y/x, <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">4</span>),<span class="number">1</span>)) <span class="comment"># 1 is initial value</span></span><br><span class="line"><span class="built_in">print</span>(functools.reduce(<span class="keyword">lambda</span> x,y: x/y, <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">4</span>),<span class="number">1</span>)) <span class="comment"># 1 is initial value</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>1.5
0.16666666666666666</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span>([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]],[])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1, 2, 3, 4, 5, 7, 8, 9]</code></pre>
<p>理解reduce的运算规则</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">elements = <span class="built_in">range</span>(<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(reduce(<span class="keyword">lambda</span> accum,x:accum+<span class="number">1</span>,elements))</span><br><span class="line">elements = <span class="built_in">reversed</span>(<span class="built_in">range</span>(<span class="number">100</span>))</span><br><span class="line"><span class="built_in">print</span>(reduce(<span class="keyword">lambda</span> accum,x:accum+<span class="number">1</span>,elements))</span><br><span class="line">elements = <span class="built_in">reversed</span>(<span class="built_in">range</span>(<span class="number">100</span>))</span><br><span class="line"><span class="built_in">print</span>(reduce(<span class="keyword">lambda</span> accum,x:accum+<span class="number">1</span>,elements,<span class="number">0</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>99
198
100</code></pre>
<p>map is in parrallel</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hp1 = <span class="built_in">open</span>(<span class="string">"2/hp1.txt"</span>,<span class="string">"rt"</span>)</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mapper</span>(<span class="params">line</span>):</span><br><span class="line">    words = line.strip().split(<span class="string">" "</span>)</span><br><span class="line">    <span class="keyword">return</span> Counter(words)</span><br><span class="line"></span><br><span class="line">result = reduce(<span class="keyword">lambda</span> x,y: x+y,<span class="built_in">map</span>(mapper,hp1)) <span class="comment"># This method is really slow</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">c1 = Counter([<span class="string">"hello"</span>,<span class="string">'world'</span>])</span><br><span class="line">c2 = Counter([<span class="string">'hello'</span>,<span class="string">'Jun'</span>])</span><br><span class="line">c1,c2,c1+c2</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(Counter({'hello': 1, 'world': 1}),
 Counter({'hello': 1, 'Jun': 1}),
 Counter({'hello': 2, 'world': 1, 'Jun': 1}))</code></pre>
<h3 id="enron-e-mail-data">Enron e-mail data</h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!gzcat email-Enron.txt.gz | head</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'gzcat' �����ڲ����ⲿ���Ҳ���ǿ����еĳ���
���������ļ���</code></pre>
<p><code>gzip</code> 打开gz压缩文件</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">enron</span>(<span class="params">limit=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">with</span> gzip.<span class="built_in">open</span>(<span class="string">"7/email-Enron.txt.gz"</span>,<span class="string">"rt"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        lines = (line.strip() <span class="keyword">for</span> line <span class="keyword">in</span> f <span class="keyword">if</span> <span class="keyword">not</span> line.startswith(<span class="string">"#"</span>))</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">from</span> itertools.islice(lines,limit)</span><br></pre></td></tr></tbody></table></figure>
<h4 id="who-sends-the-most-e-mail">Who sends the most e-mail</h4>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">mapper</span>(<span class="params">line</span>):</span><br><span class="line">    <span class="keyword">return</span> Counter({<span class="built_in">int</span>(line.split(<span class="string">"\t"</span>)[<span class="number">0</span>]): <span class="number">1</span>})</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reducer</span>(<span class="params">accumulated, x</span>):</span><br><span class="line">    <span class="keyword">return</span> accumulated + x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">senders = reduce(reducer, <span class="built_in">map</span>(mapper, enron(<span class="number">10000</span>)))</span><br><span class="line">senders.most_common(<span class="number">10</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[(76, 815),
 (95, 597),
 (127, 481),
 (93, 455),
 (106, 422),
 (72, 377),
 (90, 366),
 (78, 339),
 (109, 339),
 (56, 309)]</code></pre>
<h2 id="set"><code>set()</code></h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">set</span>()</span><br><span class="line">x.add(<span class="number">1</span>)</span><br><span class="line">x.add(<span class="number">2</span>)</span><br><span class="line">x.add(<span class="number">1</span>)</span><br><span class="line">x</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1, 2}</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">set</span>()</span><br><span class="line">x.add(<span class="built_in">frozenset</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]))</span><br><span class="line">x </span><br><span class="line"><span class="comment"># Error: x.add({1,2,3})</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>{frozenset({1, 2, 3})}</code></pre>
<h4 id="who-e-mailed-the-most-unique-people">Who e-mailed the most
unique people</h4>
<ul>
<li><code>set()</code></li>
<li>复杂的reduce例子</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">mapper</span>(<span class="params">line</span>):</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">int</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> line.split(<span class="string">"\t"</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reducer</span>(<span class="params">accumulated, x</span>):</span><br><span class="line">    sender, receiver = x</span><br><span class="line">    accumulated.setdefault(sender, <span class="built_in">set</span>())</span><br><span class="line">    accumulated[sender].add(receiver)</span><br><span class="line">    <span class="keyword">return</span> accumulated</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">unique_recipients = reduce(reducer, <span class="built_in">map</span>(mapper, enron(<span class="number">10000</span>)), {})</span><br></pre></td></tr></tbody></table></figure>
<p>This pattern emerges over and over in data analysis. So we'll stop
repeating ourselves and make a function:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">map_reduce</span>(<span class="params">iterable, mapper, reducer, reduce_init=<span class="literal">None</span></span>):</span><br><span class="line">    iter1 = <span class="built_in">map</span>(mapper, iterable)</span><br><span class="line">    iter2 = reduce(reducer, iter1, reduce_init)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span>(iter2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">email_score = map_reduce(enron(<span class="number">10000</span>), mapper, reducer, {})</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;IPython.core.display.Javascript object&gt;</code></pre>
<ul>
<li>create default value for dict</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">init = defaultdict(<span class="keyword">lambda</span>:<span class="number">0</span>)</span><br><span class="line">init</span><br></pre></td></tr></tbody></table></figure>
<pre><code>defaultdict(&lt;function __main__.&lt;lambda&gt;()&gt;, {})</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">init[<span class="number">5</span>]+=<span class="number">1</span></span><br><span class="line">init</span><br></pre></td></tr></tbody></table></figure>
<pre><code>defaultdict(&lt;function __main__.&lt;lambda&gt;()&gt;, {5: 1})</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">init = defaultdict(<span class="keyword">lambda</span>:<span class="number">0</span>)</span><br><span class="line">email_score = reduce(reducer,<span class="built_in">map</span>(mapper,enron(<span class="number">10</span>)),init)</span><br><span class="line">email_score</span><br></pre></td></tr></tbody></table></figure>
<pre><code>defaultdict(&lt;function __main__.&lt;lambda&gt;()&gt;,
            {0: {1}, 1: {0, 2, 3, 4, 5, 6, 7, 8, 9}})</code></pre>
<p>This is an example of where I would consider writing a class:</p>
<ul>
<li>只需要改变mapper和reducer，用函数overide的方式</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MapReduce</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, iterable</span>):</span><br><span class="line">        self._iterable = iterable</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mapper</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reducer</span>(<span class="params">self, accumulated, x</span>):</span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> reduce(self.reducer, <span class="built_in">map</span>(self.mapper, self._iterable), self.reduce_init)</span><br></pre></td></tr></tbody></table></figure>
<p>Here is how we would use this class:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">EmailScore</span>(<span class="title class_ inherited__">MapReduce</span>):</span><br><span class="line">    reduce_init = {}</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mapper</span>(<span class="params">self, line</span>):</span><br><span class="line">        <span class="keyword">return</span> [<span class="built_in">int</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> line.strip().split(<span class="string">"\t"</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reducer</span>(<span class="params">self, accumulated, x</span>):</span><br><span class="line">        sender, receiver = x</span><br><span class="line">        key = <span class="built_in">tuple</span>(<span class="built_in">sorted</span>(x))</span><br><span class="line">        direction = <span class="number">1</span> <span class="keyword">if</span> key[<span class="number">0</span>] == sender <span class="keyword">else</span> -<span class="number">1</span></span><br><span class="line">        accumulated.setdefault(key, <span class="number">0</span>)</span><br><span class="line">        accumulated[key] += direction</span><br><span class="line">        <span class="keyword">return</span> accumulated</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">email_score = EmailScore(enron(<span class="number">10000</span>)).run()</span><br></pre></td></tr></tbody></table></figure>
<h2 id="mapreduce-通用模板">Mapreduce 通用模板</h2>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MapReduce</span>:</span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reduce_init</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># override as necessary if the init parameter needs to change</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mapper</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reducer</span>(<span class="params">self, accum, x</span>):</span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">postprocess</span>(<span class="params">self, reduced</span>):</span><br><span class="line">        <span class="comment"># override if necessary</span></span><br><span class="line">        <span class="keyword">return</span> reduced</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self, iterable</span>):</span><br><span class="line">        mapped = <span class="built_in">map</span>(self.mapper, iterable)</span><br><span class="line">        reduced = reduce(self.reducer, mapped, self.reduce_init)</span><br><span class="line">        processed = self.postprocess(reduced)</span><br><span class="line">        <span class="keyword">return</span> processed</span><br></pre></td></tr></tbody></table></figure>
<h3 id="tricks">Tricks</h3>
<ul>
<li>用于有些index为负数的情况</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-<span class="number">1</span>%<span class="number">5</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>4</code></pre>
<ul>
<li>list中有if else的情况
<ul>
<li>and or</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">[i==<span class="number">2</span> <span class="keyword">and</span> <span class="string">"1"</span> <span class="keyword">or</span> <span class="string">"0"</span> <span class="keyword">for</span> i <span class="keyword">in</span> x]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['0', '1', '0', '0']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"1"</span> <span class="keyword">if</span> i==<span class="number">2</span> <span class="keyword">else</span> <span class="string">"0"</span>  <span class="keyword">for</span> i <span class="keyword">in</span> x]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['0', '1', '0', '0']</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure>

    </div>

    
    
    
      

  <div class="popular-posts-header">Related Posts</div>
  <ul class="related-posts">
  
      <li class="related-posts-item"><a href="/Pyspark/">Pyspark</a></li>
  
      <li class="related-posts-item"><a href="/Programming-in-Python-2/">Programming in Python (2)</a></li>
  
      <li class="related-posts-item"><a href="/Python-Generator-and-Iterator-LC-173/">Python Generator and Iterator LC 173</a></li>
  
      <li class="related-posts-item"><a href="/Tree-Traverse/">Tree Traverse</a></li>
  
      <li class="related-posts-item"><a href="/Python-Algorithm-and-Data-Structure/">Python Algorithm and Data Structure</a></li>
  
  </ul>


    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>Jun XU
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://xuj14.github.io/Programming-in-Python-1/" title="Programming in Python (1)">https://xuj14.github.io/Programming-in-Python-1/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Python-Generator-and-Iterator-LC-173/" rel="prev" title="Python Generator and Iterator LC 173">
                  <i class="fa fa-chevron-left"></i> Python Generator and Iterator LC 173
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Programming-in-Python-2/" rel="next" title="Programming in Python (2)">
                  Programming in Python (2) <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jun XU</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Symbols count total: </span>
    <span title="Symbols count total">178k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">2:42</span>
  </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.8/pdfobject.min.js","integrity":"sha256-tu9j5pBilBQrWSDePOOajCUdz6hWsid/lBNzK4KgEPM="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>



  <script src="/js/third-party/pace.js"></script>

  


  <script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"Oe6lNLDUFdCT4aO5HYh597Om-MdYXbMMI","app_key":"2dnAg0FTC6n2hMWsLlwd2Ncj","server_url":"https://xuj14.github.io/","security":true}</script>
  <script src="/js/third-party/statistics/lean-analytics.js"></script>


  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>
</html>
